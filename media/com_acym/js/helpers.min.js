"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,r,n,o,l=[],_=!0,c=!1;try{if(n=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;_=!1}else for(;!(_=(i=n.call(a)).done)&&(l.push(i.value),l.length!==t);_=!0);}catch(e){c=!0,r=e}finally{try{if(!_&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw r}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw n}}}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var acym_helperCampaigns={attachmentNb:1,initCampaigns:function(){acym_helperCampaigns.setChooseConfirmReplaceTemplate(),acym_helperCampaigns.initAttachmentCampaigns(),acym_helperCampaigns.setStopScheduled(),acym_helperCampaigns.setStopSending(),acym_helperCampaigns.setDeactivateAutomatic(),acym_helperCampaigns.setSummaryScroll(),jQuery("#acym__wysid").length<1&&acym_helperCampaigns.setSendSettingsButtons()},setSummaryScroll:function(){var e=jQuery("#workflow"),t=e.find("a").attr("href");void 0!==t&&(t.indexOf("summary")||t.indexOf("test"))&&jQuery(document).ready(function(){e.scrollLeft(e.outerWidth())})},setChooseConfirmReplaceTemplate:function(){var e=jQuery("#acym__campaign__choose__campaign").val();jQuery("#acym__templates__choose__create__empty").off("click").on("click",function(t){if(e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM))return t.preventDefault(),!1}),jQuery(".acym__templates__oneTpl").off("click").on("click",function(t){e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM)||(window.location.href=jQuery(this).find(".acym__templates__oneTpl__choose").val())})},setAutoOpenEditor:function(){jQuery("#acym__campaign__edit_email").length&&"0"===jQuery("#acym__campaign__recipients__form__campaign").val()&&jQuery("#acym__wysid__edit__button").trigger("click")},initAttachmentCampaigns:function(){acym_helperCampaigns.setAddAttachmentButton(),acym_helperCampaigns.setRemoveAttachment(),acym_helperCampaigns.setDeleteAttachment()},setAddAttachmentButton:function(){jQuery("#acym__campaigns__attach__add").off("click").on("click",function(){acym_helperCampaigns.attachmentNb>9||(jQuery("#acym__campaigns__attach__"+acym_helperCampaigns.attachmentNb).css("display",""),acym_helperCampaigns.attachmentNb++)})},setRemoveAttachment:function(){jQuery(".acym__campaigns__attach__remove").off("click").on("click",function(e){var t=e.currentTarget.getAttribute("data-id");jQuery("#attachments"+t+"selection").html(""),jQuery("#attachments"+t+"suppr").css("display","none"),jQuery("#attachments"+t).val("")})},setDeleteAttachment:function(){jQuery(".acym__campaigns__attach__delete").off("click").on("click",function(e){var t=jQuery(".acym__campaigns__attach__delete"),a=jQuery(this),i="",r="";t.each(function(e){jQuery(this).attr("data-id")==a.attr("data-id")&&(i=e,r=a.attr("data-id"))});var n=a.attr("data-mail");jQuery.post(ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlCampaigns+"&task=deleteAttachmentAjax&id="+i+"&mail="+n,function(e){(e=acym_helper.parseJson(e)).error?acym_helperCampaigns.setDisplayNotif(e.message,"error"):(acym_helperCampaigns.setDisplayNotif(e.message,"info"),jQuery("#acym__campaigns__attach__del"+r).remove())}).fail(function(e){console.log(e)})})},setDisplayNotif:function(e,t){"front"!==acym_helper.ctrlCampaigns.substr(0,5)?acym_helperNotification.addNotification(e,t):console.log(e)},setSendSettingsButtons:function(){jQuery(".acym__campaign__sendsettings__buttons-type").off("click").on("click",function(){if(jQuery(this).hasClass("disabled"))return!0;jQuery(".acym__campaign__sendsettings__buttons-type").addClass("button-radio-unselected").removeClass("button-radio-selected"),jQuery(this).removeClass("button-radio-unselected").addClass("button-radio-selected"),jQuery(".acym__campaign__sendsettings__params").hide(),jQuery('[data-show="'+jQuery(this).attr("id")+'"]').show(),jQuery('[name="sending_type"]').val(jQuery(this).attr("data-sending-type")),"acym__campaign__sendsettings__scheduled"!==jQuery(this).attr("id")?jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").removeAttr("required"):jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").attr("required","required")})},setStopScheduled:function(){jQuery(".acym__campaign__listing__scheduled__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopScheduledCampaignId" value="'+t+'">'),e.find('[name="task"]').val("stopScheduled"),e.submit()})},setStopSending:function(){jQuery(".acym__campaign__listing__sending__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopSendingCampaignId" value="'+t+'">'),e.find('[name="task"]').val("stopSending"),e.submit()})},setDeactivateAutomatic:function(){jQuery(".acym__campaign__listing__automatic__deactivate").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="id" value="'+t+'">'),e.find('[name="task"]').val("toggleActivateColumnCampaign"),e.submit()})},setSelectionCreateNewMail:function(){var e=jQuery(".acym__email__new__card:not(.acym__email__new__card__disabled)");e.off("click").on("click",function(){jQuery(this).hasClass("acym__email__new__card-selected")||(e.removeClass("acym__email__new__card-selected"),jQuery(this).addClass("acym__email__new__card-selected"),jQuery(this).hasClass("acym__email__new__card-list")&&""!==jQuery(this).find(".acym__email__new__card__select").val()||!jQuery(this).hasClass("acym__email__new__card-list")?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setSelectCreateNewMail:function(){jQuery(".acym__email__new__card__select").on("change",function(){jQuery(this).closest(".acym__email__new__card").hasClass("acym__email__new__card-selected")&&(""!==jQuery(this).val()?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setButtonCreateNewEmail:function(){jQuery("#acym__email__new__button-create").off("click").on("click",function(){var e=jQuery(".acym__email__new__card-selected"),t=e.attr("acym-data-link");if(-1!==t.indexOf("{listid}")){var a=e.find(".acym__email__new__card__select").val();t=t.replace("{listid}",a)}window.location.href=t})},setClickFlagsSummary:function(){jQuery(".acym__campaign__summary__preview__languages-one").not(".acym__campaign__summary__preview__languages-one__empty").off("click").on("click",function(){if(!jQuery(this).hasClass("language__selected")){jQuery(".language__selected").removeClass("language__selected"),jQuery(this).addClass("language__selected");var e="#acym__summary-body-"+jQuery(this).attr("data-acym-lang"),t="#acym__summary-subject-"+jQuery(this).attr("data-acym-lang"),a="#acym__summary-preview-"+jQuery(this).attr("data-acym-lang");jQuery(".acym__hidden__mail__content").val(jQuery(e).val()),acym_helperPreview.loadIframe("acym__wysid__preview__iframe__acym__wysid__email__preview",!1),jQuery(".acym__campaign__summary__email__information-subject").html(jQuery(t).val()),jQuery(".acym__campaign__summary__generated__mail__one__preview").html(jQuery(a).val())}})}},acym_helperDatePicker={setDatePickerGlobal:function(){jQuery(".acy_date_picker").off("click").on("click",function(){var e=jQuery(this),t=void 0===e.attr("data-acym-translate")||"0"!==e.attr("data-acym-translate"),a=e.val()?moment(e.val(),t?"DD MMM YYYY HH:mm":"YYYY-MM-DD HH:mm"):moment();new MaterialDatetimePicker({default:a}).on("submit",function(a){e.val(moment(a,"MM-DD-YYYY").format(t?"DD MMM YYYY HH:mm":"YYYY-MM-DD HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},setRelativeTime:function(e){var t=e.closest(".reveal"),a=parseInt(t.find(".relativenumber").val())*parseInt(t.find(".relativetype").val());jQuery('[data-rs="'+t.attr("id")+'"]').val("[time]"+(a>0?t.find(".relativewhen").val()+a:"")),jQuery('[data-open="'+t.attr("id")+'"]').val("[time]"+(a>0?t.find(".relativewhen").val()+a:"")).trigger("change")},setSpecificTime:function(e){var t=e.closest(".reveal"),a=t.find('[name^="specific_"]');jQuery('[data-rs="'+t.attr("id")+'"]').val(moment(a.val()).unix()),jQuery('[data-open="'+t.attr("id")+'"]').val(a.val()).trigger("change")},setRSDateChoice:function(){jQuery(".acym__button__clear__time").on("click",function(){var e=jQuery(this).closest(".reveal").attr("id");jQuery('[data-rs="'+e+'"]').val(""),jQuery('[data-open="'+e+'"]').val("").trigger("change")}),jQuery(".acym__button__set__time").on("click",function(){"relative"===jQuery(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?acym_helperDatePicker.setRelativeTime(jQuery(this)):acym_helperDatePicker.setSpecificTime(jQuery(this))}),jQuery(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".date_rs_selection_popup");t.find(".date_rs_selection").removeClass("is-active"),jQuery(this).addClass("is-active"),t.find(".date_rs_selection_choice").hide(),t.find(".date_rs_selection_"+jQuery(this).attr("data-type")).show()}),acym_helperDatePicker.resetThePopup()},resetThePopup:function(){jQuery(".rs_date_field").on("click",function(){var e=jQuery(this),t=jQuery('[data-rs="'.concat(e.attr("data-open"),'"]')),a=jQuery("#".concat(e.attr("data-open")));if(void 0===t.val()||""===t.val()||"[time]"===t.val())return a.find(".relativetype").val("60").trigger("change"),a.find(".relativenumber").val("0").trigger("change"),!0;if(-1!==t.val().indexOf("[time]")){a.find('[data-type="relative"]').trigger("click");var i,r,n=-1!==t.val().indexOf("-")?"-":"+",o=t.val().split(n),l=parseInt(o[1]);a.find(".relativewhen").val(n).trigger("change"),i=l/(r=l>=86400&&l%86400==0?86400:l>=3600&&l%3600==0?3600:60),a.find(".relativetype").val(r).trigger("change"),a.find(".relativenumber").val(i).trigger("change")}else a.find('[data-type="specific"]').trigger("click"),a.find(".acy_date_picker").val(moment.unix(t.val()).format("YYYY-MM-DD HH:mm"))})}},acym_helperDebugger={initDebugger:function(){window.addEventListener("keydown",function(e){e.key},!1)}},acym_helperEditorHtml={initEditorHtml:function(){acym_helperEditorHtml.setEditorField()},setEditorField:function(){jQuery("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}},acym_helperEditorWysid={initEditor:function(){var e=jQuery("#acym__wysid");if(e.length<1)return!1;acym_helperEditorWysid.mailsSettings=acym_helper.parseJson(acym_helperEditorWysid.saveSettings),jQuery("#editor_thumbnail").val(""),jQuery("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+acym_helperEditorWysid.parseTextToCss(acym_helperEditorWysid.savedStylesheet)+"</style>"),jQuery("#acym__walkthrough__email").length>0&&e.parent().insertAfter("#acym__walkthrough__email"),acym_editorWysidVersioning.checkForUnsavedVersion(),acym_editorWysidVersioning.setVersionControlCtrlZ(),acym_editorWysidImage.setChangeBuiltWithImage(),acym_editorWysidDragDrop.setFixJquerySortableWYSID(),acym_editorWysidDragDrop.setNewZoneDraggable(),acym_editorWysidDragDrop.setNewBlockDraggable(),acym_editorWysidDragDrop.setZonesSortable(),acym_editorWysidDragDrop.setBlocksDraggable(),acym_editorWysidFormAction.setOpenEditorButton(),acym_editorWysidFormAction.setCancelButtonWYSID(),acym_editorWysidFormAction.setSaveButtonWYSID(),acym_editorWysidFormAction.setSaveAsTmplButtonWYSID(),acym_editorWysidModal.setModalWindowWYSID(),acym_editorWysidModal.setDTextInsertion(),acym_editorWysidToolbar.setRightToolbarWYSID(),acym_editorWysidFontStyle.setOpenStylesheet(),acym_editorWysidFontStyle.setCancelStylesheet(),acym_editorWysidFontStyle.setApplyStylesheetSettings(),acym_editorWysidFontStyle.setSocialIconImport(),acym_helperEditorWysid.setAlertTimeoutSession(),acym_helperEditorWysid.preventSubmitEditor(),acym_helperEditorWysid.setSelectOneTemplate(),acym_helperEditorWysid.setSizeEditorWYSID(),acym_editorWysidTest.toggleSendTest(),acym_editorWysidTest.sendTestAjax(),jQuery('[id^="mce_"]').removeAttr("id"),acym_editorWysidMultilingual.setLanguageSelection(),acym_editorWysidDynamic.setDTexts()},setColumnRefreshUiWYSID:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];jQuery(".ui-helper-hidden-accessible").remove(),acym_editorWysidDragDrop.setBlocksSortable(),acym_helperEditorWysid.resizeBlockContainers(),acym_editorWysidDynamic.setTagPWordBreak(),acym_editorWysidDynamic.setTagPreInserted(),acym_helperEditorWysid.removeBlankCharacters(),acym_editorWysidTinymce.checkForEmptyText(),jQuery(".acym__wysid__column__element__button").css("overflow","unset"),e&&acym_editorWysidVersioning.setUndoAndAutoSave(t)},resizeBlockContainers:function(){jQuery(".acym__wysid__column tbody").each(function(){0===jQuery(this).children().length?jQuery(this).css({"min-height":"75px",display:"block"}).closest("table").css("min-height","75px").css("display","block"):jQuery(this).css({"min-height":"0px",display:"table-row-group"}).closest("table").css("min-height","0").css("display","table")})},addDefaultZone:function(){var e=jQuery(".acym__wysid__row"),t=!1;e.each(function(){0===jQuery(this).children().length?(jQuery(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),acym_editorWysidNewRow.addRow1WYSID(jQuery("#acym__wysid__row__temp_div")),t=!0):1===jQuery(this).children().length&&"acym__powered_by_acymailing"===jQuery(this).children().first().attr("id")?(jQuery(".acym__wysid__row").prepend('<div id="acym__wysid__row__temp_div"></div>'),acym_editorWysidNewRow.addRow1WYSID(jQuery("#acym__wysid__row__temp_div")),t=!0):jQuery(this).css({"min-height":"0",display:"table-cell"})}),t&&(acym_helperEditorWysid.addDefaultBlock(),acym_helperEditorWysid.setColumnRefreshUiWYSID())},addDefaultBlock:function(){var e=jQuery(".acym__wysid__row");if(1===e.length){var t=e.find(".acym__wysid__column");if(1===t.length&&!t.find("tbody").children().length&&!jQuery("#acym__wysid__default").length){t.addClass("acym__wysid__column__first");var a='<div id="acym__wysid__default">';a+='<div id="acym__wysid__default__start" class="cell grid-x acym_vcenter">',a+='<h1 class="cell">'+ACYM_JS_TXT.ACYM_TEMPLATE_EMPTY+"</h1>",a+='<p class="cell">'+ACYM_JS_TXT.ACYM_DRAG_BLOCK_AND_DROP_HERE+"</p>",a+="</div>",a+='<div id="acym__wysid__default__dragging" style="display: none" class="cell grid-x acym_vcenter">',a+='<h1 class="cell text-center">'+ACYM_JS_TXT.ACYM_WELL_DONE_DROP_HERE+"</h1>",a+="</div>",a+="</div>",t.before(a);var i=jQuery("#acym__wysid__default__start");i.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(i.height()).find("table").height(i.height()).find("tbody").height(i.height()),acym_helperEditorWysid.resizeBlockContainers()}}},removeBlankCharacters:function(){var e=jQuery(".acym__wysid__link__image");jQuery.each(e,function(){jQuery(this).html(jQuery(this).html().replace(/\uFEFF/g,""))})},setSizeEditorWYSID:function(){jQuery(window).off("resize").on("resize",function(){clearTimeout(window.acymResize),window.acymResize=setTimeout(function(){acym_editorWysidTinymce.addTinyMceWYSID(),acym_helperEditorWysid.resizeEditorBasedOnPage()},200)})},resizeEditorBasedOnPage:function(){var e;e="wordpress"===ACYM_CMS?jQuery("#wpadminbar").innerHeight():ACYM_J40?0:jQuery("nav.navbar").innerHeight()+jQuery("#status").innerHeight();var t=jQuery(window).width()>639?56:0,a=jQuery("#acym__wysid__top-toolbar").innerHeight();jQuery("#acym__wysid").css("min-height",jQuery(window).height()-(t+e));var i=jQuery(window).height()-(t+e+a+64);jQuery("#acym__wysid__template").css({"max-height":i,"min-height":i}),jQuery(".acym__wysid__right-toolbar__content").css("max-height",jQuery(window).height()-(t+e+48))},setSelectOneTemplate:function(){jQuery(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){jQuery(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).find("a").attr("href"),a=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getMailContent&from="+jQuery(this).attr("id");jQuery.post(a,function(e){return"error"===e?(alert(ACYM_JS_TXT.ACYM_ERROR),!1):(window.location.href=t,!1)})})})},parseTextToCss:function(e){var t="",a=_toConsumableArray(e.matchAll(/@import[^;]*;/gi));for(var i in a)t+=a[i],e=e.replace(a[i],"");return jQuery.parsecss(e,function(a){jQuery("#acym__wysid__custom__style").remove(),t+=acym_helperEditorWysid.parsecssP(a);var i=_toConsumableArray(e.matchAll(/@media[^{(]*(\([^{]*\))[^{]*\{([^{}]*(\{[^}]*\}[^{}]*)*[^{}]*)\}/gi));for(var r in i)void 0!==i[r][2]&&(t+="@media"+i[r][1]+"{",jQuery.parsecss(i[r][2],function(e){t+=acym_helperEditorWysid.parsecssP(e)}),t+="}")}),t},parsecssP:function(e){var t="",a=e;for(var i in a){var r=a[i],n=-1!==i.indexOf("#acym__wysid__template")?"":"#acym__wysid__template .body ";for(var o in t+=n+i+"{",r)t+=o+":"+r[o]+";";t+="} "}return t},preventSubmitEditor:function(){jQuery("#acym_wrapper").on("keydown",function(e){if("Enter"===e.key&&"TEXTAREA"!==e.target.nodeName)return e.preventDefault(),!1})},setAlertTimeoutSession:function(){var e=jQuery("#acym__wysid__session--lifetime").val();setTimeout(function(){acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END,level:"warning"})},1e3*(e-60))},_selectedRows:[],$focusElement:"",saveSettings:jQuery(".acym__wysid__hidden__save__settings").val(),mailsSettings:{},stylesheetTemp:"",savedStylesheet:jQuery(".acym__wysid__hidden__save__stylesheet").val(),savedColors:jQuery(".acym__wysid__hidden__save__colors").val(),clicking:!1,$resizingElement:"",versionControl:0,timeClickImage:0,dynamicPreviewIdentifier:0,typingTimer:"",typingTimerGiphy:"",offsetGiphy:0,queryGiphy:"hello",defaultMailsSettings:{"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#000000"},a:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#0000F1"},"span.acym_link":{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#0000F1"},li:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"},default:{"font-family":"Helvetica"}},socialMedia:{facebook:{src:ACYM_MEDIA_URL+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:ACYM_MEDIA_URL+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:ACYM_MEDIA_URL+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:ACYM_MEDIA_URL+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:ACYM_MEDIA_URL+"/images/logo/instagram.png"},vimeo:{src:ACYM_MEDIA_URL+"/images/logo/vimeo.png"},wordpress:{src:ACYM_MEDIA_URL+"/images/logo/wordpress.png"},youtube:{src:ACYM_MEDIA_URL+"/images/logo/youtube.png"}}},acym_helperErrorMessage={initErrorMessage:function(){var e=[],t=!1;jQuery(document).on("invalid.zf.abide",function(t,a){if(!a.is(":radio")||void 0!==a.attr("required")){jQuery("#formSubmit")[0].disabled=!1;var i=acym_helperErrorMessage.getErrorMessage(a);a.after('<div class="acym__input-error"><i class="acymicon-exclamation-circle"></i>'+i+"</div>");var r=jQuery(".acym__input-error");setTimeout(function(){r.remove()},5e3),e=[]}}).on("valid.zf.abide",function(t,a){"email"===a.attr("type")&&""!==a.val()&&(e[0]=void 0===e[0]?0:e[0],e[0]=acym_helper.emailValid(a.val())&&""!==a.val()?0:e[0]+1)}).on("submit",function(a){var i=jQuery("#formSubmit")[0];if(void 0===i)return!0;e[3]=void 0===e[3]?0:e[3];var r=jQuery("#acym__users__export"),n=r.find("#acym__modal__lists-selected"),o=jQuery('input[name="export_users-to-export"]:checked');r.length>0&&"list"===o.val()&&"[]"===n.val()?(e[3]++,acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error")):r.length>0&&"list"===o.val()&&"[]"!==n.val()&&(e[3]=0),e.length>0&&jQuery.each(e,function(e,a){a>0&&(t=!0)}),t?(i.disabled=!1,a.preventDefault(),t=!1):(i.disabled=!0,t=!1)})},getErrorMessage:function(e){var t=e.attr("type"),a=e.attr("pattern"),i=[];return void 0!==e.attr("required")&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"===t?i.push(ACYM_JS_TXT.email):"text"===t&&(void 0!==a&&void 0!==ACYM_JS_TXT[a]?i.push(ACYM_JS_TXT[a]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}},acym_helperFile={initFile:function(){acym_helperFile.setAttachment(),acym_helperFile.setDisplayFileTree(),acym_helperFile.setSwitchView(),acym_helperFile.setChangeFolder()},setAttachment:function(){jQuery(".acym__file__select__add").off("click").on("click",function(e){var t=jQuery("#acym__file__select__mapid").val(),a=e.currentTarget.getAttribute("mapdata"),i=jQuery("#currentPath").val();jQuery("#"+t,window.parent.document).val(i+"/"+a),jQuery("#"+t+"suppr",window.parent.document).css("display",""),jQuery("#"+t+"selection",window.parent.document).html(a),jQuery("#acym__campaign__email__"+t,window.parent.document).closest(".reveal-overlay").trigger("click")}),jQuery(".acym__file__select__add.acym_clickme").trigger("click")},setSwitchView:function(){jQuery("#acym__file__select__area__switch button").off("click").on("click",function(){jQuery("#acym__file__select__area__switch button").toggleClass("is-hidden"),jQuery("#acym__file__select__area__grid").toggleClass("is-hidden"),jQuery("#acym__file__select__area__list").toggleClass("is-hidden")})},setDisplayFileTree:function(){jQuery("#displaytree").on("click",function(){var e=jQuery("#treefile");"none"===e.css("display")?e.css("display","block"):e.css("display","none")})},setChangeFolder:function(){jQuery(".tree-child-item").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.getAttribute("data-path"),a=window.location.href,i=a.substring(a.lastIndexOf("&")+1);"selected_folder"===(i=i.split("="))?a=a.replace(i,"selected_folder="+t):a+="&currentFolder="+t,window.location.href=a})}},acym_helper={ctrlMails:ACYM_IS_ADMIN?"mails":"frontmails",ctrlDynamics:ACYM_IS_ADMIN?"dynamics":"frontdynamics",ctrlLists:ACYM_IS_ADMIN?"lists":"frontlists",ctrlUsers:ACYM_IS_ADMIN?"users":"frontusers",ctrlCampaigns:ACYM_IS_ADMIN?"campaigns":"frontcampaigns",emailValid:function(e){return null!==e.match(ACYM_REGEX_EMAIL)},escape:function(e){return e=e.replace(/"/g,"&quot;")},parseJson:function(e,t){if("object"===_typeof(e))return e;try{var a=e.indexOf("{"),i=e.indexOf("[");if(!isNaN(a)&&a>0&&!isNaN(i)&&i>0&&(e=e.substring(a)),void 0!==e||""!==e)return JSON.parse(e)}catch(e){console.log(e.stack)}return t},sprintf:function(){var e=Object.values(arguments),t=e.splice(0,1)[0];return 1===e.length?t=t.replace("%s",e[0]):jQuery.each(e,function(e,a){t=t.replace("%"+(e+1)+"$s",a)}),t},setSubmitButtonGlobal:function setSubmitButtonGlobal(){jQuery(".acy_button_submit").off("click").on("click",function(e){if(void 0!==jQuery(this).attr("data-force-submit")&&jQuery("[required]").removeAttr("required"),jQuery(this).hasClass("disabled"))return!1;e.preventDefault();var condition=jQuery(this).attr("data-condition");if(condition&&"function"==typeof jQuery[condition]&&!jQuery[condition]())return!1;var confirmationMessage=jQuery(this).attr("data-confirmation-message");if("undefined"!==_typeof(confirmationMessage)&&!acym_helper.confirm(ACYM_JS_TXT[confirmationMessage]))return!1;if(jQuery(this).attr("acym-data-before")){var result=eval(jQuery(this).attr("acym-data-before"));if(!1===result)return!1}var $form=jQuery("#acym_form"),task=jQuery(this).attr("data-task"),controller=jQuery(this).attr("data-ctrl");void 0!==controller&&$form.find("[name=ctrl]").val(controller),$form.find('[name="task"]').val(task);var step=jQuery(this).attr("data-step");null!=step&&$form.find('[name="nextstep"]').val(step);var and=jQuery(this).attr("data-and");null!=and&&$form.append('<input type="hidden" value="'+and+'" name="and_action">');var $buttonSubmit=$form.find("#formSubmit");if(null==$buttonSubmit[0]){var evt=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(evt)}else $buttonSubmit.trigger("click")})},setDeleteOptionsGlobal:function(){jQuery(".acym__listing__block__delete__trash").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(" .acym__listing__block__delete");t.css("width","80px"),t.find("div>i").css("width","0"),t.animate({maxWidth:"80px"},"fast",function(){jQuery(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).closest(".acym__listing__block__delete"))})}),jQuery(".acym__listing__block").off("mouseleave").on("mouseleave",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).find(".acym__listing__block__delete"))})})},setHideDeleteOptionsGlobal:function(e){jQuery(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return confirm(e.replace("<br />","\n"))}),setMessageClose:function(){jQuery(".acym_message i.acymicon-remove").off("click").on("click",function(){jQuery(this).parent().remove()})},preventEnter:function(){jQuery("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(e){if("Enter"===e.key&&!jQuery('[name$="_pagination_page"], [name="pagination_page_ajax"]').is(":visible"))return e.preventDefault(),!1})},getIntValueWithoutPixel:function(e){return void 0===e||""===e?0:parseInt(e.replace(/[^-\d\.]/g,""))},empty:function(e){return null===e||(void 0===e||(void 0===e||(""===e||(0===e.length||(0===e||("0"===e||!1===e))))))},alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return alert(e)}),getCookie:function(e){var t="";return document.cookie.split(";").map(function(a){(a=a.trim().split("="))[0]===e&&(t=a[1])}),t},setCookie:function(e,t,a){var i=e+"="+this.escape(t);if(null!=a){var r=new Date;r.setDate(r.getDate()+a),i+=";expires="+r.toUTCString()}document.cookie=i},get:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ACYM_AJAX_URL,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jQuery.get(t,a).then(function(t){return t?("object"!==_typeof(t)&&(t=e.parseJson(t)),t.error&&!acym_helper.empty(t.message)&&console.error(t.message),t):t}).fail(function(e,a,i){var r={error:!0};return r.message=i,r.data=[],console.error("Error calling ".concat(t,", responded with error ").concat(a," ").concat(i)),i})},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ACYM_AJAX_URL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=jQuery.post(e,t);return a?(i.then(acym_helper.parseJson).fail(acym_helper.handleErrors),i):i.then(acym_helper.parseResponse).fail(acym_helper.handleErrors)},parseResponse:function(e){return"object"!==_typeof(e)&&(e=acym_helper.parseJson(e)),e.error&&!acym_helper.empty(e.message)&&console.error(e.message),e},handleErrors:function(e,t,a){var i={error:!0};return i.message=a,i.data=[],console.error("Ajax error, responded with error ".concat(t," ").concat(a)),i},sameArrays:function(e,t){return e.length===t.length&&e.every(function(e,a){return e===t[a]})},setButtonRadio:function(){jQuery(".button-radio").off("click").on("click",function(e){e.preventDefault(),jQuery('[acym-button-radio-group="'+jQuery(this).attr("acym-button-radio-group")+'"]').removeClass("button-radio-selected"),jQuery(this).addClass("button-radio-selected");var t=jQuery(this).attr("acym-callback");setTimeout(function(){acym_helper.empty(t)||"function"!=typeof window[t]||window[t]()},100)})},setKonami:function(){var e=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"],t=0;jQuery(document).on("keydown",function(a){a.key===e[t]?++t===e.length&&(jQuery("<style>* {animation: acy-spin 20s linear infinite;}</style>").appendTo("body"),t=0):t=0})}},acym_helperImport={initImport:function(){acym_helperImport.setVerificationGenericImport(),acym_helperImport.setImportCMSLists(),acym_helperImport.setImportFromFileEvent(),acym_helperImport.setImportSubmit(),acym_helperImport.setChangeCharset(),acym_helperImport.setChangeTableName(),acym_helperImport.setCreateListFromImportPage()},setImportCMSLists:function(){var e;e=jQuery("#acym__users__import__from_database").is(":visible")?jQuery("#submit_import_database"):jQuery("#acym__users__import__cms_users").is(":visible")?jQuery("#submit_import_cms"):jQuery("#submit_import_mailpoet"),jQuery(".acym__users__import__button").off("click").on("click",function(){e.trigger("click")}),jQuery("#acym__users__import__skip__button").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').attr("value",""),e.trigger("click")})},setVerificationGenericImport:function(){var e=jQuery("#formSubmit");jQuery(".acym__users__import__generic__import__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&e.trigger("click")}),jQuery("#acym__users__generic__import__skip__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&(jQuery('[name="acym__entity_select__selected"]').attr("value",""),e.trigger("click"))})},verifyGenericImport:function(){"no-list"===jQuery(this).attr("id")&&(jQuery("#acym__modal__lists-selected").attr("value",""),jQuery("#acym__import__new-list").attr("value",""));var e=!0,t="",a="",i=!1,r="",n=[],o=jQuery("#acym__users__import__from_file__ignore__checkbox").is(":checked"),l=jQuery(".fieldAssignment").length;isNaN(l)&&(l=1);for(var _=0;_<l;_++){var c=jQuery("#fieldAssignment"+_);0==(a=c.val())&&(o?(c.val(1),a=1):(acym_helperImport.setColorUnassignedField(c),e=!1,t+="\n"+acym_helper.sprintf(ACYM_JS_TXT.ACYM_ASSIGN_COLUMN_TO_FIELD,_+1))),"email"==a&&(i=!0),1!=a&&-1!==n.indexOf(a)?(e=!1,t+="\n"+acym_helper.sprintf(ACYM_JS_TXT.ACYM_DUPLICATE_X_FOR_X,a,_+1)):n.push(a),r+=","+a}return i||(e=!1,t+="\n"+ACYM_JS_TXT.ACYM_ASSIGN_EMAIL_COLUMN),!1===e?(alert(ACYM_JS_TXT.ACYM_FILL_ALL_INFORMATION+"\n"+t),!1):(","===r.substr(0,1)&&(r=r.substring(1)),jQuery("#import_columns").val(r),!0)},setColorUnassignedField:function(e){0==e.val()?e.addClass("fieldAssignmentError"):e.removeClass("fieldAssignmentError")},setImportFromFileEvent:function(){var e=jQuery("#acym__users__import__from_file__import__input");e.val(null),e.off("change").on("change",function(){var t=jQuery("#acym_form");this.files.length>0&&"csv"===this.files[0].name.substr(this.files[0].name.length-3).toLowerCase()?(jQuery(".acym__users__import__from_file__file-name").html(this.files[0].name),jQuery(".acym__users__import__from_file__file").show(),jQuery(".acym__users__import__from_file__choose").hide(),jQuery(".acym__users__import__from_file__button-valid").removeAttr("disabled"),jQuery(".acym__users__import__from_file__file__close").off("click").on("click",function(){jQuery(".acym__users__import__from_file__file-name").html(""),jQuery(".acym__users__import__from_file__button-valid").prop("disabled",!0),jQuery(".acym__users__import__from_file__file").hide(),jQuery(".acym__users__import__from_file__choose").show(),e.val(null)}),jQuery(".acym__users__import__from_file__button-valid").off("click").on("click",function(){t.find('[name="import_from"]').val("file"),t.submit()})):acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_COULD_NOT_UPLOAD_CSV_FILE,"error")})},setImportSubmit:function(){jQuery(".acym__import__submit").on("click",function(){var e=jQuery(this).attr("data-from"),t=jQuery("#acym_form");t.find('[name="import_from"]').val(e),t.find("#formSubmit").trigger("click")})},setChangeCharset:function(){jQuery("#acyencoding").off("change").on("change",function(){var e=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlUsers+"&task=ajaxEncoding&encoding="+jQuery(this).val()+"&filename="+jQuery(this).attr("data-filename"),t="",a=jQuery(".fieldAssignment").length;isNaN(a)&&(a=1);for(var i=0;i<a;i++)t+="&fieldAssignment"+i+"="+jQuery("#fieldAssignment"+i).val();e+=t,jQuery.post(e,function(e){jQuery("#acym__users__import__generic__matchdata").html(e)})})},setChangeTableName:function(){var e="";jQuery("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){e=jQuery(this).val(),jQuery("#select2-acym__users__import__from_database__field--tablename-container").html(e);var t=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlUsers+"&task=getColumnsFromTable&tablename="+e;jQuery.post(t,function(e){jQuery(".acym__users__import__from_database__fields").html(e)})})},setCreateListFromImportPage:function(){var e=jQuery("#acym__users__import__create-list__button"),t=jQuery("#acym__users__generic__import__create-list__button");e.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!1)}),t.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!0)})},setActionListenerButtonCreateList:function(e){var t=jQuery("#acym__users__import__create-list"),a=jQuery("#acym__users__import__create-list__field"),i=jQuery("#acym__user__import__add-subscription__modal");if(t.is(":visible")){if(""===a.val())return;jQuery("#acym__users__import__create-list__loading-logo").show();var r=jQuery('[name="acym__entity_select__selected"]').val(),n=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlLists+"&task=ajaxCreateNewList&list_name="+encodeURIComponent(a.val())+"&generic="+(e?"1":"0")+"&selected="+r;jQuery.post(n,function(e){i.html(e),i.children().show(),i.children().append('<button class="close-button" data-close aria-label="Close reveal" type="button"><span aria-hidden="true">&times;</span></button>'),t.hide(),jQuery(window).trigger("refreshEntitySelect"),jQuery("#acym__users__import__create-list__loading-logo").hide(),acym_helperImport.setCreateListFromImportPage()})}else t.show(),a.focus();a.keydown(function(e){if("Enter"===e.key)return e.preventDefault(),!1})}},acym_helperInput={setInputFile:function(){jQuery(".acym__button__file").off("click").on("click",function(){var e=jQuery(this),t=e.prev();t.trigger("click"),t.off("change").on("change",function(){e.next().html(jQuery(this).val().split("\\").pop())})})},setMulticouple:function(){jQuery(".multikeyvalue_container_new").off("click").on("click",function(e){e.preventDefault(),jQuery(this).before('<div class="multikeyvalue_container_separator cell small-6"></div><input type="text" class="cell" placeholder="'+ACYM_JS_TXT.ACYM_DKIM_KEY+'" value=""/><input type="text" class="cell" placeholder="'+ACYM_JS_TXT.ACYM_VALUE+'" value="" />'),acym_helperInput.setNewMulticouple()}),acym_helperInput.setNewMulticouple()},setNewMulticouple:function(){jQuery('.multikeyvalue_container input[type="text"]').off("change").on("change",function(){var e={},t=jQuery('.multikeyvalue_container input[type="text"]');t.each(function(a){if(a%2!=1){var i=jQuery(this).val(),r=t[a+1].value;0!==i.length&&0!==r.length&&(e[i]=r)}}),jQuery('.multikeyvalue_container input[type="hidden"]').val(JSON.stringify(e))})}},acym_helperListing={initJsListing:function(){acym_helperListing.setCheckAll(),acym_helperListing.setOrdering(),acym_helperListing.setSelectActions(),acym_helperListing.setCheckboxesActionsListings(),acym_helperToolbar.initToolbar()},setSortableListing:function(){jQuery(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,t){var a=jQuery(".acym__sortable__listing .acym__listing__row"),i=jQuery(".acym__sortable__listing").attr("data-sort-ctrl"),r=[];a.each(function(e){r.push(jQuery(this).attr("data-id-element"))}),acym_helper.post(ACYM_AJAX_URL,{ctrl:i,task:"ajaxSetOrdering",order:JSON.stringify(r)}).then(function(e){e.error&&console.log("Error can't order these elements")})}})},setCheckAll:function(){jQuery("#checkbox_all").off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]');jQuery(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")})},setOrdering:function(){jQuery("#acym__listing__ordering").off("change").on("change",function(){var e=jQuery(this).closest("#acym_form");"campaigns"!=e.find('[name="ctrl"]').val()&&e.find('[name="task"]').val("listing"),e.submit()}),jQuery(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=jQuery("#acym__listing__ordering__sort-order--input"),t=jQuery(this).closest("#acym_form");"asc"===e.val()?e.val("desc"):e.val("asc"),""===t.find('[name="task"]').val()&&t.find('[name="task"]').val("listing"),t.submit()}),jQuery(".acym__select__sort").on("change",function(){jQuery(this).closest("#acym_form").submit()})},setSelectActions:function(){function e(){var e=this.value,t=!1;e&&"0"!==e||(e=this.dataset.action,t=!0);var a="",i=jQuery("#acym__listing__action__delete-message").val();switch(e){case"delete":a=t?"".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE_ONE):"".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE," ").concat(i);break;case"setActive":a=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":a=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:a=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if("duplicate"===e||"duplicateFollowup"===e||"export"===e||acym_helper.confirm(a)){var r=jQuery(this).closest("#acym_form"),n=jQuery(this).attr("data-ctrl");if(void 0!==n&&(r.find('[name="return_listing"]').val(r.find('[name="ctrl"]').val()),r.find('[name="ctrl"]').val(n)),jQuery(this).val()&&"0"!==jQuery(this).val()||(e=this.dataset.action),r.find('[name="task"]').val(t?e:jQuery(this).val()),t){jQuery(":checkbox").prop("checked",!1);var o="#checkbox_"+this.dataset.acyElementid;jQuery(o).prop("checked",!0)}r.submit()}else jQuery(this).val("0")}ACYM_IS_ADMIN&&jQuery("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),jQuery("#listing_actions").off("change").on("change",e),jQuery(".fastActions").on("click",e)},setCheckboxesActionsListings:function(){var e=jQuery('[name="elements_checked[]"]');e.off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]:checked').length;if(1===e?jQuery(".acym__campaign__duplicate").show():jQuery(".acym__campaign__duplicate").hide(),e>0?jQuery("#listing_actions").removeAttr("disabled"):jQuery("#listing_actions").attr("disabled","true"),jQuery('[name="elements_checked[]"]:not(:checked)').length>0?jQuery("#checkbox_all").prop("checked",!1):jQuery("#checkbox_all").prop("checked",!0),jQuery("#acym__users").length){var t=jQuery("#acym__users__listing__number_to_export"),a=jQuery("#acym__users__listing__number_to_add_to_list"),i=jQuery("#acym__users__listing__button--add-to-list");acym_helperListing.checkFiltersApplied(),0===e?(t.html("&nbsp;("+t.attr("data-default")+")"),i.addClass("disabled").attr("disabled","true"),a.html(e)):(t.html("&nbsp;("+e+")"),i.removeClass("disabled").removeAttr("disabled"),a.html(e))}if(jQuery("#acym__lists").length){var r=jQuery("#acym__lists__listing__number_to_export");0===e?r.html(r.attr("data-default")):r.html(e)}}),e.trigger("change"),jQuery("#acym__users").length&&(jQuery('#users_list, [name="users_search"]').on("change",function(){acym_helperListing.checkFiltersApplied()}),jQuery(".acym__status__select").on("click",function(){acym_helperListing.checkFiltersApplied()}))},checkFiltersApplied:function(){var e=jQuery('[name="elements_checked[]"]:checked').length,t=jQuery("#acym__users__listing__number_to_export");0===e&&(jQuery("#users_list").val()>0||jQuery('[name="users_search"]').val().length>0||jQuery(".acym__status__select").attr("acym-data-status").length>0)?t.hide():t.show()}},acym_helperModal={isMultilingualEdition:jQuery("#acym__wysid__edit__languages").length>0,initModal:function(){acym_helperModal.setPopupIframeToggleGlobal(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setButtonModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists(),acym_helperModal.getContentAjaxModalPaginationLists(),acym_helperModal.setButtonModalPaginationUsers(),acym_helperModal.setShowSelectedOrShowAllUsersModalPaginationUsers(),acym_helperModal.setSearchUserModalPaginationUsers(),acym_helperModal.setButtonConfirmModalPaginationUsers(),acym_helperModal.initOverlay()},initOverlay:function(){!jQuery("#acym_form").length||jQuery("#acym__editor__content").length||jQuery(".campaigns_edit_email").length||jQuery(".frontcampaigns_edit_email").length?jQuery(".reveal-overlay").appendTo("#acym_wrapper"):jQuery(".reveal-overlay").appendTo("#acym_form")},setResetMail:function(){jQuery(".acym__automation__action__reset__mail").off("click").on("click",function(){if(acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var e=jQuery(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),t=jQuery(this).parent(),a=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=deleteMailAutomation&id="+e.val();jQuery.post(a,function(a){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),t.html(""),acym_helperModal.setAjaxCallStartFrom()})}})},setAjaxCallStartFrom:function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getTemplateAjax",t=jQuery('input[name="return"]'),a=t.length>0&&-1!==t.val().indexOf("automation")||jQuery("#acym__automation__actions__json").length>0?"1":"0",i=jQuery('input[name="id"]').val(),r=jQuery('input[name="followup[id]"]');r.length>0&&(e+="&followup_id="+r.val()),this.isMultilingualEdition&&(e+="&is_multilingual_edition=1"),e+="&search="+jQuery("#acym_search_template_choose__ajax").val(),e+="&tag="+jQuery("#acym_tag_template_choose__ajax").val(),e+="&type="+jQuery("#acym__mail__type").val(),e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&editor="+jQuery("#acym__mail__edit__editor").val(),e+="&automation="+a,e+="&inmail="+(jQuery("#editor_autoSave").length>0?"1":"0"),e+="&id="+(void 0===i?0:i),e+="&acym_pagination_element_per_page="+jQuery('[name="acym_pagination_element_per_page"]').val(),t.length>=1&&(e+="&return="+encodeURIComponent(t.val())),jQuery("#acym__mail__list-id").length>0&&(e+="&list_id="+jQuery("#acym__mail__list-id").val()),jQuery.post(e,function(e){jQuery(".acym__template__choose__ajax").html(e),acym_helperModal.setSearchAjaxModalChooseTemplateStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.setStartFromHtmlEditor(),acym_helperModal.isMultilingualEdition&&acym_editorWysidMultilingual.setClickStartFromTemplate(),jQuery("#acym__automation__actions").length>0&&acym_helperModal.chooseOneTemplate()})},setPaginationAjaxStartFrom:function(){jQuery(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),jQuery("#acym_pagination__ajax").attr("value",jQuery(this).attr("page")),acym_helperModal.setAjaxCallStartFrom()}),ACYM_IS_ADMIN&&jQuery('[name="acym_pagination_element_per_page"]').select2({theme:"foundation",width:"100%"}),jQuery('#acym_pagination__ajax, [name="acym_pagination_element_per_page"]').on("change",function(){acym_helperModal.setAjaxCallStartFrom()})},setSearchAjaxModalChooseTemplateStartFrom:function(){acym_helperModal.setSearchValueStartFrom(),acym_helperModal.setSelectTagStartFrom(),acym_helperModal.setChoosenTypeStartFrom()},setStartFromHtmlEditor:function(){"acyEditor"!==jQuery("#acym__mail__edit__editor").val()&&jQuery("#acym__automation__actions").length<1&&(jQuery(".reveal .acym__templates__oneTpl").on("click",function(){window.location.replace(jQuery(this).find("a").attr("href"))}),jQuery(".acym__templates__choose__ribbon").on("click",function(){window.location.replace(jQuery(this).closest(".acym__templates__pic").find("a").attr("href"))}))},chooseOneTemplate:function(){jQuery(".acym__templates__oneTpl").off("click").on("click",function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=duplicateMailAutomation&id="+jQuery(this).attr("id"),t=jQuery("#acym__template__choose__modal"),a=jQuery('[data-modal-name="'+t.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+a.find('[name$="[mail_id]"]').val(),jQuery.post(e,function(e){if((e=acym_helper.parseJson(e,{error:!0,message:acym_helper.sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)})).error)return alert(e.message),!1;a.find(".acym__automation__action__mail__name").html(e.data.newMail.name+'<i class="cursor-pointer acymicon-close acym__color__red acym__automation__action__reset__mail margin-left-1"></i>'),a.find('[name$="[mail_id]"]').val(e.data.newMail.id),a.find('[data-task="createMail"]').html(ACYM_JS_TXT.ACYM_EDIT_MAIL),jQuery(".reveal").foundation("close"),acym_helperModal.setResetMail()})})},setSearchValueStartFrom:function(){var e=null;jQuery('input[name="mailchoose_search__ajax"]').off("keydown").on("keydown",function(t){var a=jQuery(this),i=a.val();if((i||"Backspace"===t.key)&&!acym_helper.empty(i)&&i.length>=2&&(clearTimeout(e),e=setTimeout(function(){jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom()},1500)),"Enter"===t.key)return t.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom(),!1;"Backspace"===t.key&&""==a.val()&&(clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",""),acym_helperModal.setAjaxAndResetPaginationStartFrom())}),jQuery("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",jQuery('input[name="mailchoose_search__ajax"]').attr("value")),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setAjaxAndResetPaginationStartFrom:function(){jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.setAjaxCallStartFrom()},setSelectTagStartFrom:function(){jQuery("#mailchoose_tag__ajax").on("change",function(e){jQuery("#acym_tag_template_choose__ajax").attr("value",jQuery(this).attr("value")),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setChoosenTypeStartFrom:function(){jQuery("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(e){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym__type__choosen").removeClass("is-active"),jQuery(this).addClass("is-active").blur(),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setTemplateModal:function(e){e=void 0!==e,acym_helperModal.setAjaxAndResetPaginationStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.isMultilingualEdition&&acym_editorWysidMultilingual.setClickStartFromTemplate(),acym_helperModal.setClearButtonStartFrom(),e&&jQuery('[data-open="acym__template__choose__modal"]').on("click",function(){jQuery("#acym__template__choose__modal").attr("data-button",jQuery(this).attr("data-modal-name"))})},setClearButtonStartFrom:function(){jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(){jQuery('input[name="mailchoose_search__ajax"]').val(""),jQuery("#acym_search_template_choose__ajax").val(""),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setPopupIframeToggleGlobal:function(){jQuery("[data-iframe]").on("click",function(){var e=jQuery("#"+jQuery(this).attr("data-open")),t=jQuery(this).attr("data-reload"),a=jQuery(this).attr("data-ajax"),i=jQuery(this).attr("data-iframe-class"),r="true"===a?ACYM_AJAX_URL+jQuery(this).attr("data-iframe"):jQuery(this).attr("data-iframe");e.prepend('<iframe src="'+r+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){jQuery(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){jQuery(this).siblings("iframe").remove(),t&&location.reload()}),jQuery(".reveal-overlay").on("click",function(){e.find("iframe").remove(),t&&location.reload()})})},setShowSelectedOrShowAllListsModalPaginationLists:function(){var e=jQuery(".modal__pagination__show-selected"),t=jQuery(".modal__pagination__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),jQuery(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1)),acym_helperModal.getContentAjaxModalPaginationLists()})},getContentAjaxModalPaginationLists:function(){var e=jQuery(".modal__pagination__listing__lists__in-form");if(0!==e.length){var t=ACYM_AJAX_URL+"&page=acymailing_lists&ctrl="+acym_helper.ctrlLists+"&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";t+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),t+="&selectedLists="+jQuery("#acym__modal__lists-selected").val(),t+="&alreadyLists="+jQuery("#acym__user__lists_already_add").val(),t+="&show_selected="+jQuery("#modal__pagination__show-information").val(),t+="&search_lists="+jQuery("#modal__pagination__search__lists").val(),t+=jQuery("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0",jQuery.get(t,function(t){jQuery("#modal__pagination__search__spinner").hide(),e.html(t),acym_helperModal.setAjaxPaginationModalPagination(),acym_helperModal.setListingAjaxUserModalPaginationLists(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists()})}},setAjaxPaginationModalPagination:function(){jQuery(".acym__pagination__page__ajax").off("click").on("click",function(){jQuery("#acym_pagination__ajax").val(jQuery(this).attr("page")),acym_helperModal.getContentAjaxModalPaginationLists()})},setListingAjaxUserModalPaginationLists:function(){jQuery(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=jQuery(this).next().children("label .modal__pagination__listing__lists__list-name "),t=jQuery("#acym__modal__lists-selected"),a=t.val(),i=[];a=""===a?[]:acym_helper.parseJson(a),jQuery(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(parseInt(jQuery(this).val())),1)),jQuery(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(parseInt(jQuery(this).val()))}),jQuery.each(i,function(e){-1===jQuery.inArray(i[e],a)&&a.push(i[e])}),t.val(JSON.stringify(a)),jQuery("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),jQuery("#acym__popup__subscription__change").trigger("change")})},setSearchListModalPaginationLists:function(){var e=null,t=jQuery('input[name="modal_search_lists"]'),a=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__search__lists");t.off("keydown").on("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),acym_helperModal.setSearchLists(e))}),t.off("keyup").on("keyup",function(t){var r=jQuery(this),n=r.val();(n||"Backspace"===t.key)&&""!=n&&n.length>=2?(jQuery("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",n),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists()},1e3)):clearTimeout(e),""==r.val()&&(clearTimeout(e),a.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists())}),jQuery(".modal__pagination__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),acym_helperModal.setSearchLists(e)}),jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(r){r.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show(),acym_helperModal.getContentAjaxModalPaginationLists()})},setShowSelectedOrShowAllUsersModalPaginationUsers:function(){var e=jQuery(".modal__pagination__users__show-selected"),t=jQuery(".modal__pagination__users__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),jQuery(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1))})},setSearchUserModalPaginationUsers:function(){var e=null,t=jQuery('input[name="modal_search_users"]'),a=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__users__search__input");t.off("keydown").on("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),acym_helperModal.setSearchUsers(e))}),t.off("keyup").on("keyup",function(t){var r=jQuery(this).val();(r||"Backspace"===t.key)&&""!=r&&r.length>=2?(jQuery("#modal__pagination__users__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",r),jQuery("#acym_pagination__ajax").attr("value",1)},1e3)):clearTimeout(e),""==r&&(clearTimeout(e),a.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1))}),jQuery(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),acym_helperModal.setSearchUsers(e)}),jQuery(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(r){r.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show()})},setSearchUsers:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__users__search__input").attr("value",jQuery('input[name="modal_search_users"]').attr("value"))},setSearchLists:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__search__lists").attr("value",jQuery('input[name="modal_search_lists"]').attr("value")),acym_helperModal.getContentAjaxModalPaginationLists()},setButtonModalPaginationLists:function(){jQuery(".modal__pagination__button-open").off("click").on("click",function(){acym_helperModal.getContentAjaxModalPaginationLists()})},setButtonModalPaginationUsers:function(){jQuery(".modal__pagination__users__button-open").off("click").on("click",function(){jQuery("#acym__modal__users-selected").val("")})},setButtonConfirmModalPaginationUsers:function(){jQuery("#modal__pagination__users__confirm").off("click").on("click",function(){var e=jQuery("#acym__modal__users__form-task").val();jQuery('input[name="task"]').val(e),jQuery("#acym_form").submit()})}},acym_helperPagination={setPaginationGlobal:function(){jQuery(".acym__pagination__page").off("click").on("click",function(){jQuery("#acym_pagination").val(jQuery(this).attr("page")),jQuery("#acym_form").submit()}),jQuery(".acym__lists__filter__tags").off("change").on("change",function(){jQuery("#select2-lists_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__templates__filter__tags").off("change").on("change",function(){jQuery("#select2-mails_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__choose_template__filter__tags").on("change",function(){jQuery("#acym_pagination").val(1),jQuery("#acym_form").submit()}),jQuery(".acym__campaigns__filter__tags").off("change").on("change",function(){jQuery("#select2-campaigns_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__type__choosen").off("click").on("click",function(){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym_ordering_option").removeClass("is-active"),jQuery(this).addClass("is-active"),acym_helperPagination.initPagination()}),jQuery(".acym__filter__status").off("click").on("click",function(){jQuery("#acym_filter_status").val(jQuery(this).attr("acym-data-status")),acym_helperPagination.initPagination()}),ACYM_IS_ADMIN&&jQuery(".acym__select__pagination__dropdown").select2({theme:"foundation",width:"60px"}),jQuery("#acym_pagination_element_per_page").on("change",function(){jQuery("#formSubmit").trigger("click")})},initPagination:function(){jQuery("#acym_pagination").val(1),jQuery("#acym_form").trigger("submit")}},acym_helperPreview={setPreviewIframe:function(){jQuery(".acym__wysid__hidden__save__content").off("change").on("change",function(){acym_helperPreview.setPreviewIframe()}),acym_helperPreview.addIframePreview("acym__wysid__email__preview","desktop"),jQuery("#acym__wysid__view__desktop").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!0)}),jQuery("#acym__wysid__view__smartphone").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!1)})},addIframePreview:function(e,t,a){a=null!=a;var i,r=!0,n=jQuery("#acym__wysid__email__preview"),o="acym__wysid__preview__iframe__"+e,l='<div class="cell auto"></div>';l+='<iframe id="'+o+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"></iframe>',l+='<div class="cell auto"></div>',l+='<div class="acym__fadeout"></div>',l+='<i class="acymicon-keyboard_arrow_down acym__preview__extend acym__preview__toggle acym__preview-toggle"></i>',l+='<i class="acymicon-sort acym__preview-toggle acym__preview__toggle__top"></i>',jQuery("#"+e).html(l);var _=jQuery("#"+o);"smartphone"==t?_.css("maxWidth","425px"):_.css("maxWidth","inherit"),_.css("height","100%"),i=_.css("height");jQuery("#acym__campaign__summary").length?(_.css({height:"200px"}),n.css("padding-bottom","200px"),_.contents().find("body").css("overflow","hidden"),jQuery(".acym__preview-toggle").off("click").on("click",function(){jQuery(".acym__fadeout").toggle(),r?(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_down").removeClass("acym__preview__extend").addClass("acymicon-keyboard_arrow_up").addClass("acym__preview__collapse"),_.css({height:i}).contents().find("body").css("overflow","auto"),n.css("padding-bottom",i),r=!r):(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_up").removeClass("acym__preview__collapse").addClass("acymicon-keyboard_arrow_down").addClass("acym__preview__extend"),_.css({height:"200px"}).contents().find("body").css("overflow","hidden"),n.css("padding-bottom","200px"),r=!r)})):(jQuery(".acym__fadeout").hide(),jQuery(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?acym_helperPreview.loadIframe(o,a):_.on("load",function(){acym_helperPreview.loadIframe(o,a)})},setTemplateForPreview:function(e){var t=jQuery("#acym__wysid__template"),a=e?"desktop":"smartphone";t.find(".acym__wysid__row__selector").remove(),jQuery("#acym__template__preview").val(t.html()),jQuery(".acym__wysid__fullscreen__modal__content__container").hide(),jQuery("#acym__wysid__fullscreen__modal__content__"+a).closest(".acym__wysid__fullscreen__modal__content__container").show(),acym_helperPreview.addIframePreview("acym__wysid__fullscreen__modal__content__"+a,a,!0),jQuery("#acym__wysid__fullscreen__modal").css("display","flex").on("click",function(){acym_helperEditorWysid.setColumnRefreshUiWYSID(!1),acym_editorWysidTinymce.addTinyMceWYSID(),acym_editorWysidRowSelector.setZoneAndBlockOverlays(),jQuery(this).css("display","none")})},loadIframe:function(e,t){var a='<div id="acym__wysid__template" class="cell acym__foundation__for__email">';a+='<table class="body"><tbody><tr>',a+='<td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(239, 239, 239);"><center>',a+='<table align="center" border="0" cellpadding="0" cellspacing="0"><tbody>',a+='<tr><td class="acym__wysid__row ui-droppable ui-sortable">',a+='<table class="row acym__wysid__row__element" border="0" cellpadding="0" cellspacing="0"><tbody style="background-color: transparent;">',a+='<tr><th class="small-12 medium-12 large-12 columns">',a+='<table class="acym__wysid__column" style="min-height: 75px; display: block;" border="0" cellpadding="0" cellspacing="0"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table>',a+="</th></tr>",a+="</tbody></table>",a+="</td></tr>",a+="</tbody></table>",a+="</center></td>",a+="</tr></tbody></table>",a+="</div>";var i=jQuery("#"+e).contents(),r=i.find("head"),n=i.find("body"),o=jQuery(".acym__wysid__hidden__save__stylesheet").attr("value"),l=jQuery(".acym__wysid__hidden__save__content"),_=jQuery(".acym__hidden__mail__content").val(),c=jQuery("#acym__wysid__template"),s=c.find("#acym__wysid__default").detach();c.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove();var u=c.html();c.find(".acym__wysid__column__first").before(s),r.append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'),r.append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),r.append("<style>"+ACYM_FIXES_FOR_EMAIL+"</style>"),r.append('<style type="text/css">#acym__wysid__template center > table { width: 100%; }</style>'),void 0!==o&&""!==o&&setTimeout(function(){r.append("<style>"+o+"</style>")},100);var m="";if(t?(l.attr("value",'<div id="acym__wysid__template" class="cell">'+u+"</div>"),m='<div id="acym__wysid__template" class="cell">'+jQuery("#acym__template__preview").val()+"</div>"):""===l.attr("value")&&(""===u?l.attr("value",a):l.attr("value",'<div id="acym__wysid__template" class="cell">'+u+"</div>")),"empty"===l.attr("value")&&l.attr("value",a),""!==_){var y=jQuery(".acym__hidden__mail__stylesheet").html();void 0!==y&&""!==y&&r.append("<style>"+y+"</style>"),n.html(""),n.append(_)}""!==m?n.css("margin","0").append(m):n.css("margin","0").append(l.attr("value")),i.find("a").attr("target","_blank"),i.find('a[href^="#"]').attr("target","_top"),jQuery(document).trigger("acy_preview_loaded")}},acym_helperRadio={setRadioIconsGlobal:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery('[for="'+jQuery(this).attr("data-radio")+'"]').trigger("click")}),jQuery('.acym_radio_group > input[type="radio"]').off("change").on("change",function(){var e=jQuery(this).attr("name"),t=jQuery('input[name="'+e+'"]:checked').val(),a=jQuery('input[name="'+e+'"]');a.each(function(){var e=jQuery(this).attr("id"),a=jQuery(this).attr("acym-data-related");jQuery(this).val()!==t&&(jQuery('i[data-radio="'+e+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+e+'"].acym_radio_checked').hide(),acym_helper.empty(a)||jQuery("."+a).hide())}),a.each(function(){var e=jQuery(this).attr("id"),a=jQuery(this).attr("acym-data-related");jQuery(this).val()===t&&(jQuery('i[data-radio="'+e+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+e+'"].acym_radio_checked').show(),acym_helper.empty(a)||jQuery("."+a).show())})}).change()}},acym_helperSearch={setClearSearch:function(){jQuery(".acym__search-clear").off("click").on("click",function(){jQuery(".acym__search-field").attr("value",""),acym_helperPagination.initPagination()})}},acym_helperSegments={beforeSave:function(){var e=jQuery("[name^=acym_action]").length>0;return e||acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_PLEASE_SELECT_FILTERS,"error",!0),e}},acym_helperSelectionMultilingual={mainLanguage:"",currentLanguage:"",translation:{},defaultTranslation:{},$translationInput:"",mainParams:{},init:function(e){this.currentLanguage=this.mainLanguage=jQuery("#acym__multilingual__selection__main-language").val(),this.$translationInput=jQuery("#acym__multilingual__selection__translation"),this.$defaultTranslationInput=jQuery("#acym__multilingual__selection__translation__default"),this.translation=acym_helper.empty(this.$translationInput.val())?{}:acym_helper.parseJson(this.$translationInput.val()),this.defaultTranslation=acym_helper.empty(this.$defaultTranslationInput.val())?{}:acym_helper.parseJson(this.$defaultTranslationInput.val()),"[]"===JSON.stringify(this.translation)&&(this.translation={}),"function"==typeof acym_helperSelectionMultilingual["setMainParams_".concat(e)]&&acym_helperSelectionMultilingual["setMainParams_".concat(e)](),"function"==typeof acym_helperSelectionMultilingual["updateTranslation_".concat(e)]&&acym_helperSelectionMultilingual["updateTranslation_".concat(e)](),jQuery(".acym__multilingual__selection__one").off("click").on("click",function(){if(!jQuery(this).hasClass("acym__multilingual__selection__one__selected")){var t=jQuery(this).attr("data-acym-code");acym_helper.empty(t)||(jQuery(".acym__multilingual__selection__one").removeClass("acym__multilingual__selection__one__selected"),jQuery(this).addClass("acym__multilingual__selection__one__selected"),"function"==typeof acym_helperSelectionMultilingual["changeLanguage_".concat(e)]&&(acym_helperSelectionMultilingual.currentLanguage=t,acym_helperSelectionMultilingual["changeLanguage_".concat(e)](t)))}})},changeLanguage_list:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={name:"",display_name:"",description:""});var t=e===this.mainLanguage?this.mainParams.name:this.translation[this.currentLanguage].name,a=e===this.mainLanguage?this.mainParams.description:this.translation[this.currentLanguage].description,i=e===this.mainLanguage?this.mainParams.display_name:this.translation[this.currentLanguage].display_name;jQuery('[name="list[name]"]').val(t),jQuery('[name="list[display_name]"]').val(i),jQuery('[name="list[description]"]').val(a)},updateTranslation_list:function(){jQuery('[name="list[name]"], [name="list[description]"], [name="list[display_name]"]').off("keyup").on("keyup",function(){var e=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,t=jQuery(this).attr("name"),a=t.substring(t.indexOf("[")+1,t.lastIndexOf("]"));e?acym_helperSelectionMultilingual.mainParams[a]=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][a]=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},setMainParams_list:function(){this.mainParams.name=jQuery('[name="list[name]"]').val(),this.mainParams.description=jQuery('[name="list[description]"]').val(),this.mainParams.display_name=jQuery('[name="list[display_name]"]').val()},setMainParams_field:function(){this.mainParams.name=jQuery('[name="field[name]"]').val()},updateTranslation_field:function(){jQuery('[name="field[name]"]').off("keyup").on("keyup",function(){acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage?acym_helperSelectionMultilingual.mainParams.name=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].name=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},changeLanguage_field:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={name:""});var t=e===this.mainLanguage?this.mainParams.name:this.translation[this.currentLanguage].name;jQuery('[name="field[name]"]').val(t)},setMainParams_campaign:function(){var e=jQuery('[name="senderInformation[from_name]"]'),t=jQuery('[name="senderInformation[from_email]"]'),a=jQuery('[name="senderInformation[reply_to_name]"]'),i=jQuery('[name="senderInformation[reply_to_email]"]');this.mainParams.from_name=e.val(),this.mainParams.from_email=t.val(),this.mainParams.reply_to_name=a.val(),this.mainParams.reply_to_email=i.val(),this.defaultTranslation[this.mainLanguage]={from_name:e.attr("placeholder"),from_email:t.attr("placeholder"),reply_to_name:a.attr("placeholder"),reply_to_email:i.attr("placeholder")}},updateTranslation_campaign:function(){jQuery('[name="senderInformation[from_name]"], [name="senderInformation[from_email]"], [name="senderInformation[reply_to_name]"], [name="senderInformation[reply_to_email]"]').off("keyup").on("keyup",function(){var e=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,t="from_name";"senderInformation[from_email]"===jQuery(this).attr("name")?t="from_email":"senderInformation[reply_to_name]"===jQuery(this).attr("name")?t="reply_to_name":"senderInformation[reply_to_email]"===jQuery(this).attr("name")&&(t="reply_to_email"),e?acym_helperSelectionMultilingual.mainParams[t]=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][t]=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},changeLanguage_campaign:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={from_name:"",from_email:"",reply_to_name:"",reply_to_email:""});var t=e===this.mainLanguage?this.mainParams.from_name:this.translation[this.currentLanguage].from_name,a=e===this.mainLanguage?this.mainParams.from_email:this.translation[this.currentLanguage].from_email,i=e===this.mainLanguage?this.mainParams.reply_to_name:this.translation[this.currentLanguage].reply_to_name,r=e===this.mainLanguage?this.mainParams.reply_to_email:this.translation[this.currentLanguage].reply_to_email,n=jQuery('[name="senderInformation[from_name]"]'),o=jQuery('[name="senderInformation[from_email]"]'),l=jQuery('[name="senderInformation[reply_to_name]"]'),_=jQuery('[name="senderInformation[reply_to_email]"]');if(n.val(t),o.val(a),l.val(i),_.val(r),!acym_helper.empty(this.defaultTranslation[this.currentLanguage])){var c=ACYM_JS_TXT.ACYM_DEFAULT+": ";void 0!==this.defaultTranslation[this.currentLanguage].from_name&&n.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].from_name),void 0!==this.defaultTranslation[this.currentLanguage].from_email&&o.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].from_email),void 0!==this.defaultTranslation[this.currentLanguage].reply_to_name&&l.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].reply_to_name),void 0!==this.defaultTranslation[this.currentLanguage].reply_to_email&&_.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].reply_to_email)}},setMainParams_configuration:function(){this.mainParams.from_name=jQuery('[name="config[from_name]"]').val(),this.mainParams.from_email=jQuery('[name="config[from_email]"]').val(),this.mainParams.replyto_name=jQuery('[name="config[replyto_name]"]').val(),this.mainParams.replyto_email=jQuery('[name="config[replyto_email]"]').val()},updateTranslation_configuration:function(){jQuery('[name="config[from_name]"], [name="config[from_email]"], [name="config[replyto_name]"], [name="config[replyto_email]"]').off("keyup").on("keyup",function(){var e=jQuery("#from_as_replyto").is(":checked"),t=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,a="from_name";"config[from_email]"===jQuery(this).attr("name")?a="from_email":"config[replyto_name]"===jQuery(this).attr("name")?a="replyto_name":"config[replyto_email]"===jQuery(this).attr("name")&&(a="replyto_email");var i="";t?(acym_helperSelectionMultilingual.mainParams[a]=jQuery(this).val(),e&&-1!==a.indexOf("from")&&(i=a.replace("from","replyto"),acym_helperSelectionMultilingual.mainParams[i]=jQuery(this).val())):(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][a]=jQuery(this).val(),e&&-1!==a.indexOf("from")&&(i=a.replace("from","replyto"),acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][i]=jQuery(this).val()),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation))),""!==i&&jQuery('[name="config['.concat(i,']"]')).val(jQuery(this).val())}),jQuery("#from_as_replyto").on("change",function(){if(!jQuery(this).is(":checked")||acym_helperSelectionMultilingual.currentLanguage===acym_helperSelectionMultilingual.mainLanguage)return!1;jQuery('[name="config[replyto_name]"]').val(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].from_name),jQuery('[name="config[replyto_email]"]').val(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].from_email)})},changeLanguage_configuration:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={from_name:"",from_email:"",replyto_name:"",replyto_email:""});var t=e===this.mainLanguage?this.mainParams.from_name:this.translation[this.currentLanguage].from_name,a=e===this.mainLanguage?this.mainParams.from_email:this.translation[this.currentLanguage].from_email,i=e===this.mainLanguage?this.mainParams.replyto_name:this.translation[this.currentLanguage].replyto_name,r=e===this.mainLanguage?this.mainParams.replyto_email:this.translation[this.currentLanguage].replyto_email;jQuery('[name="config[from_name]"]').val(t),jQuery('[name="config[from_email]"]').val(a),jQuery('[name="config[replyto_name]"]').val(i),jQuery('[name="config[replyto_email]"]').val(r)}},acym_helperSelectionPage={initSelectionPage:function(){0===jQuery(".acym__selection_disabled").length&&(this.setSelectionElement(!1,!1,void 0,"#acym__selection__button-select"),this.setSelectionButton())},setSelectionElement:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=jQuery(".acym__selection__card:not(.acym__selection__card__disabled)");r.off("click").on("click",function(){jQuery(this).hasClass("acym__selection__card-selected")||(r.removeClass("acym__selection__card-selected"),jQuery(this).addClass("acym__selection__card-selected"),e&&acym_helperSelectionPage.setDisplaySettings(this),void 0!==a&&a(this),void 0!==i&&document.querySelector(i).scrollIntoView({behavior:"smooth",block:"center"}),t||(jQuery(this).hasClass("acym__selection__select-card")&&""!==jQuery(this).find(".acym__selection__select-card__select").val()||!jQuery(this).hasClass("acym__selection__select-card")?jQuery("#acym__selection__button-select").removeAttr("disabled"):jQuery("#acym__selection__button-select").attr("disabled","true")))})},setSelectionButton:function(){jQuery("#acym__selection__button-select").off("click").on("click",function(){var e=jQuery(".acym__selection__card-selected"),t=e.attr("acym-data-link");if(-1!==t.indexOf("{dataid}")){var a=e.find(".acym__email__new__card__select").val();t=t.replace("{dataid}",a)}window.location.href=t})},setDisplaySettings:function(e){var t,a,i=_createForOfIteratorHelper(document.getElementsByClassName("send_settings"));try{for(i.s();!(a=i.n()).done;){var r=a.value;r.id==="".concat(e.id,"_settings")&&(t=r),r.style.display="none"}}catch(e){i.e(e)}finally{i.f()}void 0!==t&&(t.style.display="flex")}},acym_helperSwitch={setSwitchFieldsGlobal:function(){jQuery(".switch-label").on("click",function(){if(!jQuery(this).hasClass("disabled")){var e=jQuery('input[data-switch="'+jQuery(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}})},setButtonSwitch:function(){var e=jQuery("button[acym-button-switch-type]");e.off("click").on("click",function(e){e.preventDefault();var t=jQuery(this);t.parent().find('> .button:not("button-secondary")').addClass("button-secondary"),t.removeClass("button-secondary"),jQuery('a[data-tab-identifier="'+t.attr("acym-button-switch-type").toLowerCase()+'"]').trigger("click")}),e.first().trigger("click")}},acym_helperTab={initTab:function(){acym_helperTab.setTab(),acym_helperTab.reloadRadioButtons()},setTab:function(){jQuery(".acym_tab").off("click").on("click",function(e){if("true"===jQuery(this).attr("data-empty"))return!1;var t=jQuery(this).closest(".tabs").attr("id");localStorage.setItem("acy"+t,jQuery(this).attr("data-tab-identifier"));var a=jQuery(this).attr("data-tab-identifier");jQuery(".acym__tabs__inbar__element").each(function(){var e=jQuery(this).attr("acym-data-identifier");e.length>0&&(e===a?jQuery(this).show():jQuery(this).hide())})});var e=jQuery(".tabs").attr("id"),t=localStorage.getItem("acy"+e),a=jQuery("#"+e).find('a[data-tab-identifier="'+t+'"]');a.length&&!a.closest(".tabs-title").hasClass("tabs-title-empty")?a.trigger("click"):jQuery("#"+e+" .acym_tab").each(function(){if(!jQuery(this).closest(".tabs-title").hasClass("tabs-title-empty"))return jQuery(this).trigger("click"),!1})},reloadRadioButtons:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery("#"+jQuery(this).attr("data-radio")).trigger("click")}),jQuery('input[type="radio"]').on("change",function(){var e=jQuery('input[name="'+jQuery(this).attr("name")+'"]:checked').val();jQuery('input[name="'+jQuery(this).attr("name")+'"]').each(function(){jQuery(this).val()===e?(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').show()):(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').hide())})}).change()}},acym_helperThumbnail={setAjaxSaveThumbnail:function(){var e=jQuery("#editor_thumbnail"),t=jQuery('[name="thumbnail"]');if(-1!==e.val().indexOf(".png"))return!0;if(""===e.val())return""!==t.val()&&e.val(t.val()),!0;var a=t.val();t.val("");var i={ctrl:acym_helper.ctrlMails,task:"setNewThumbnail",content:e.val(),thumbnail:a};return acym_helper.post(ACYM_AJAX_URL,i).then(function(t){t.error?(acym_helperNotification.addNotification(acym_helper.sprintf(ACYM_JS_TXT.ACYM_COULD_NOT_SAVE_THUMBNAIL_ERROR_X,t.message),"error"),e.val("")):e.val(t.data.fileName),location.reload()})}},acym_helperToggle={initJsToggle:function(){acym_helperToggle.setSwitchToggle(),acym_helperToggle.setToggleArrow(),acym_helperToggle.setToggleGlobal(),acym_helperToggle.setToggleCheckboxesGlobal(),acym_helperToggle.setSelectToggle(),acym_helperToggle.setShowMore()},setToggleGlobal:function(){jQuery(".acym_toggleable").off("click").on("click",function(){var e=jQuery(this);e.attr("class","acymicon-circle-o-notch acymicon-spin");var t=e.attr("data-acy-table"),a=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),r=e.attr("data-acy-newvalue"),n=ACYM_TOGGLE_URL+"&table="+t+"&field="+a+"&id="+i+"&value="+r;acym_helper.get(n).then(function(e){if(e.error)console.log(e.message);else{var r=jQuery("[data-acy-table="+t+"][data-acy-field="+a+"][data-acy-elementid="+i+"]");r.attr("data-acy-newvalue",e.data.value).attr("class",e.data.classes),void 0!==e.data.tooltip&&r.closest(".acym__tooltip").find(".acym__tooltip__text").html(e.data.tooltip)}})}),jQuery(".acym_toggle_delete").off("click").on("click",function(){var e=jQuery(this);if(!e.attr("confirmation")||acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var t=e.attr("data-acy-table"),a=e.attr("data-acy-elementid"),i=ACYM_TOGGLE_URL+"&task=delete&table="+t+"&id="+a,r=e.attr("data-acy-method");void 0!==r&&(i+="&method="+r),jQuery.ajax({url:i,type:"GET"}).done(function(e){"mail"===t?jQuery("#acym_form").submit():jQuery(".grid-x[data-acy-elementid="+a+"]").remove()})}}),jQuery(".switch-label").off("click").on("click",function(){var e=jQuery(this).attr("for");jQuery('[data-switch="'+e+'"]').trigger("change")}),jQuery(".acym_toggle_switch").off("change").on("change",function(){var e=jQuery(this),t=e.attr("data-acy-table"),a=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),r=e.attr("data-acy-newvalue"),n=ACYM_TOGGLE_URL+"&table="+t+"&field="+a+"&id="+i+"&value="+r;jQuery.ajax({url:n,type:"GET"}).done(function(t){var a=jQuery.parseJSON(t);a.error?console.log(a.message):e.attr("data-acy-newvalue",a.data.value)})})},setToggleCheckboxesGlobal:function(){var e=jQuery('input.acym_toggle[type="checkbox"]');e.off("change").on("change",function(){var e=jQuery("."+jQuery(this).attr("data-toggle")),t=jQuery(this).is(":checked"),a=jQuery("#"+jQuery(this).attr("data-value"));e.each(function(){var e=jQuery(this);t?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),a&&a.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),a&&a.val(0))})}),e.trigger("change")},setSwitchToggle:function(){var e=jQuery('[data-toggle-switch]:not([data-toggle-switch=""])');e.off("change").on("change",function(){var e=jQuery(this).attr("data-toggle-switch-open");1!=jQuery(this).val()&&"show"==e||1==jQuery(this).val()&&"hide"==e?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()}),e.each(function(e){var t=jQuery(this).attr("data-toggle-switch-open");1==jQuery(this).val()&&"show"==t||1!=jQuery(this).val()&&"hide"==t?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()})},setShowMore:function(){jQuery(".acym__configuration__showmore-head").off("click").on("click",function(){event.preventDefault(),jQuery("#"+jQuery(this).find("[data-toggle-showmore]").attr("data-toggle-showmore")).slideToggle(),jQuery(this).find("i").toggleClass("acymicon-keyboard_arrow_up acymicon-keyboard_arrow_down"),jQuery(this).find(".acym__title").toggleClass("margin-bottom-0")})},setToggleArrow:function(){jQuery(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=jQuery(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(e.show(),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up"))})},setSelectToggle:function(){jQuery('[data-toggle-select]:not([data-toggle-select=""])').on("change",function(){var e=acym_helper.parseJson(jQuery(this).attr("data-toggle-select")),t=jQuery(this).val();jQuery.each(e,function(e,t){jQuery(t).hide()}),jQuery.each(e,function(a,i){if(t===a){var r=e[a].split(",");jQuery.each(r,function(e,t){jQuery(t).show()})}})}).trigger("change")}},acym_helperToolbar={initToolbar:function(){this.setMoreOptionsButtons(),this.setStatusOnload()},setMoreOptionsButtons:function(){var e=jQuery("#acym__toolbar__button-more-filters"),t=jQuery(".acym__toolbar__more-filters"),a=jQuery("#acym__toolbar__more-filters-apply");e.off("click").on("click",function(){t.toggle(),t.is(":visible")?(e.addClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_HIDE_FILTERS)):(e.removeClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_SHOW_FILTERS))}),a.off("click").on("click",function(){jQuery("#acym_form").submit()})},setStatusOnload:function(){var e=jQuery("#acym__toolbar__statuses-value").val();void 0!==e&&""!==e&&(e=acym_helper.parseJson(e),Object.keys(e).map(function(t){var a=jQuery('[name="'+t+'"]');if(0===a.length)return!1;a.val(e[t])}),jQuery("#acym__toolbar__button-more-filters").trigger("click"))}},acym_helperTooltip={setTooltip:function(){jQuery(".acym__tooltip, [data-acym-tooltip]").off("mouseenter").on("mouseenter",function(){if(void 0!==jQuery(this).attr("data-acym-tooltip")){jQuery(this).addClass("acym__tooltip");var e=void 0!==jQuery(this).attr("data-acym-tooltip-position")?"acym__tooltip__text__"+jQuery(this).attr("data-acym-tooltip-position"):"";0==jQuery(this).find(".acym__tooltip__text").length&&jQuery(this).append('<span class="acym__tooltip__text '+e+'">'+jQuery(this).attr("data-acym-tooltip")+"</span>")}acym_helperTooltip.setPositionTooltip(jQuery(this).find(".acym__tooltip__text"),jQuery(this))})},setPositionTooltip:function(e,t){if(e.hasClass("wysid_tooltip"))e.css({position:"absolute",top:t.outerHeight()+14+"px",left:"-"+(250-t.outerWidth())/2+"px",width:"250px"});else{var a,i,r=t.offset(),n=jQuery(window).scrollTop(),o=r.top-n;e.hasClass("acym__tooltip__text__right")?(a=o-e.height()<0?0:o-e.height(),i=r.left+t.width()+10<0?0:r.left+t.width()+10):e.hasClass("acym__tooltip__text__left")?(a=o-e.height()<0?0:o-e.height(),i=r.left-e.width()-t.width()-10<0?0:r.left-e.width()-t.width()-10):(a=Math.max(0,o-e.height()-15),i=Math.max(0,r.left-e.width()/2+t.width()/2)),e.css({top:a+"px",left:i+"px"})}},addTooltip:function(e,t,a,i){return'<span class="acym__tooltip '.concat(a,'"><span class="acym__tooltip__text ').concat(i,'">').concat(t,"</span>").concat(e,"</span>")},addInfo:function(e,t){return t=void 0===t?"":t,this.addTooltip('<span class="acym__tooltip__info__container"><i class="acym__tooltip__info__icon acymicon-info-circle"></i></span>',e,"acym__tooltip__info",t)},setUserInfoLoadingHover:function(){jQuery(".acym__hover__user_info").off("mouseenter").on("mouseenter",function(){var e=this;if(jQuery(this).find(".acymicon-spin").length>0){var t=ACYM_AJAX_URL+"&ctrl=users&task=getUserInfoAjax",a={userId:jQuery(this).attr("data-id")};acym_helper.get(t,a).then(function(t){var a="";if(acym_helper.empty(t.message))for(var i=0,r=Object.entries(t.data);i<r.length;i++){var n=_slicedToArray(r[i],2),o=n[0],l=n[1];a+="".concat(o,": ").concat(l,"<br>")}else a=t.message;jQuery(e).find(".acym__tooltip__text").html(a)})}})}},acym_helperUser={setSubscribeUnsubscribeUser:function(){var e=jQuery("#acym_form");jQuery(".acym__user__action--subscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","subscribeUser"),e.submit()}),jQuery(".acym__user__action--unsubscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","unsubscribeUser"),e.submit()}),jQuery(".acym__user__action--reset").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","resetSubscription"),e.submit()}),jQuery(".acym__user__action--unsubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","unsubscribeUserFromAll"),e.submit()}),jQuery(".acym__user__action--resubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","resubscribeUserToAll"),e.submit()})}};