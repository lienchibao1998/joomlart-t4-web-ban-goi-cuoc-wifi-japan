!function(e){let a=e(".acym_deactivate_modal"),t=e("body"),c=e("#acym_feedback_otherReason"),n=e("#acym_feedback_contact_container_display"),o=e("#acym_feedback_contact_checkbox"),_=e("#acym_feedback_contact_email"),i="",d=e("#acym_feedback_contact_email_label");function l(){let e=document.querySelector("#acym_feedback_otherReason").value.trim(),a=document.querySelector(".acym_deactivate_button_deactivate");"ACYM_OTHER"===i&&0===e.length?a.innerHTML=ACYM_JS_TXT.ACYM_SKIP_AND_DEACTIVATE:a.innerHTML=ACYM_JS_TXT.ACYM_SUBMIT_AND_DEACTIVATE}function r(){a.removeClass("active"),t.removeClass("has-modal"),a.find('input[type="radio"]').prop("checked",!1),a.find("#acym_feedback_otherReason").val(""),a.find("#acym_feedback_contact_checkbox").prop("checked",!0),document.querySelector(".acym_deactivate_button_deactivate").innerHTML=ACYM_JS_TXT.ACYM_SKIP_AND_DEACTIVATE,c.hide(),d.show(),n.hide()}function u(e){window.location.href=e}a.appendTo(t),function(){let h=document.querySelector("#deactivate-acymailing").href;e("#deactivate-acymailing").on("click",function(e){e.preventDefault(),a.addClass("active"),t.addClass("has-modal")}),o.on("change",function(e){e.currentTarget.checked?d.show():d.hide()}),e(".acym_deactivate_button_deactivate").on("click",e=>{let a=document.querySelector("#acym_feedback_otherReason").value.trim(),t="";"ACYM_OTHER"===i&&o.is(":checked")&&(t=_.val()),i.length>0&&("ACYM_OTHER"!==i||a.length>0)?(ajaxUrl=ACYM_AJAX_URL+"&ctrl=deactivate&task=saveFeedback",jQuery.post(ajaxUrl,{reason:i,otherReason:"ACYM_OTHER"===i?a:"",email:t},e=>{u(h)}).fail(()=>{u(h)})):u(h)}),a.on("click",function(e){e.target===this&&r()}),e(".dashicons-no-alt, .acym_deactivate_modal_button_close").on("click",function(e){e.preventDefault(),r()}),e("input[type=radio]").change(function(e){e.target.checked&&("ACYM_OTHER"!==e.target.id&&(c.hide(),n.hide()),i=e.target.value.trim(),l())}),c.bind("input propertychange",function(){"ACYM_OTHER"===i&&l()}),e("#acym_deactivate_modal_list_otherReason").change(()=>{c.show(),n.show()})}()}(jQuery);