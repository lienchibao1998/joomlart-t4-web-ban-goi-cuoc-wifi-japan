jQuery(function(e){function _(){e(".acym__walkthrough__list__receivers__remove").off("click").on("click",function(){e(this).closest("tr").remove()})}e("#acym__walk_through_license__button__license").on("click",function(){let _=jQuery("#acym__walkthrough__step_license__wait_attach_license_icon");_.removeClass("is-hidden");const a={ctrl:"dashboard",task:"stepLicenseAttachLicense",licenseKey:jQuery("#acym__configuration__license-key").val()};acym_helper.post(ACYM_AJAX_URL,a).then(a=>{let t=document.getElementById("acym__walk_through_license__licenseStatus");a.error?(t.innerHTML=a.message,t.classList.remove("acym__color__green"),t.classList.add("acym__color__red")):(e("#acym__walk_through_license__button__cron").removeAttr("disabled"),e(".acym__tooltip_button__cron").css("display","none"),t.innerHTML=ACYM_JS_TXT.ACYM_LICENSE_ACTIVATED,t.classList.add("acym__color__green"),t.classList.remove("acym__color__red")),_.addClass("is-hidden")})}),e("#acym__walk_through_license__button__cron").on("click",function(){if("disabled"===jQuery("#acym__walk_through_license__button__cron").attr("disabled"))return;let e=jQuery("#acym__walkthrough__step_license__wait_active_cron_icon");e.removeClass("is-hidden");const _={ctrl:"dashboard",task:"stepLicenseActivateCron",licenseKey:jQuery("#acym__configuration__license-key").val()};acym_helper.post(ACYM_AJAX_URL,_).then(_=>{let a=document.getElementById("acym__walk_through_license__cron_label");_.error?(a.innerHTML=_.message,a.classList.remove("acym__color__green"),a.classList.add("acym__color__red")):(a.innerHTML=ACYM_JS_TXT.ACYM_ACTIVATED,a.classList.add("acym__color__green"),a.classList.remove("acym__color__red")),e.addClass("is-hidden")})}),function(){let _=e('input[name="config[mailer_method]"]');_.on("change",function(){e(".send_settings").hide();let _=e('input[name="config[mailer_method]"]:checked').val();const a=e(`#${_}_settings`);a.length>0&&(a.show(),jQuery("#acym__selection__button-select").removeAttr("disabled"))}),_.trigger("change")}(),e("#acym__walk-through-1__content__toggle-reply-to__checkbox").off("change").on("change",function(){e(".acym__walk-through-1__content__reply-to").toggle()}),e("#acym__subscribe__news").on("click",function(){let _=e('input[type="email"]').val();if(!acym_helper.emailValid(_))return alert(ACYM_JS_TXT.email),!1;e(this).attr("disabled","true");const a=`${AJAX_URL_ACYMAILING}wp-admin/admin-ajax.php?page=acymailing_front`,t="joomla"===ACYM_CMS?45:46;acym_helper.get(a,{action:"acymailing_frontrouter",ctrl:"frontusers",task:"subscribe",noheader:1,hiddenlists:`1,${t}`,"user[email]":_}),e(".acy_button_submit").trigger("click")}),_(),e("#acym__walkthrough__list__new").on("click",function(){e(this).hide(),e("#acym__walkthrough__list__add-zone").show(),e("#acym__walkthrough__list__new-address").focus()}),e("#acym__walkthrough__list__add").on("click",function(){let a=e("#acym__walkthrough__list__new-address"),t=a.val();if(!acym_helper.emailValid(t))return alert(ACYM_JS_TXT.email),!1;{let c='<input type="hidden" name="addresses[]" value="'+t+'"/>'+t,r='<i class="acymicon-remove acym__walkthrough__list__receivers__remove"></i>';e("#acym__walkthrough__list__receivers").append("<tr><td>"+c+"</td><td>"+r+"</td></tr>"),a.val(""),e("#acym__walkthrough__list__add-zone").hide(),e("#acym__walkthrough__list__new").show(),_()}}),e("#acym__walkthrough__list__new-address").on("keypress",function(_){if("Enter"===_.key)return e("#acym__walkthrough__list__add").trigger("click"),!1}),e("#acym__walkthrough__skip__fail").off("click").on("click",function(){e("[required]").removeAttr("required"),e('[type="email"]').attr("type","text"),e("#acym__walkthrough__skip").trigger("click")}),e(".acym__walkthrough__result__choice__one").off("click").on("click",function(){if(e(this).hasClass("selected"))return!0;e(".acym__walkthrough__result__choice__one").removeClass("selected"),e(this).addClass("selected"),"acym__walkthrough__result__choice__no"===e(this).attr("id")?e("#acym__walkthrough__result__spam").addClass("visible"):e("#acym__walkthrough__result__spam").removeClass("visible"),e('input[name="result"]').val(e(this).attr("data-value")),e('[data-task="saveStepResult"]').attr("disabled",!1)}),function(){const e=jQuery("#acym__walkthrough__acymailer__domain__cname");if(0===e.find(".acym__listing__row .acymicon-circle-o-notch").length)return;const _=jQuery("#acym__walkthrough__acymailer__domain").val();if(acym_helper.empty(_))return;const a=jQuery("#acym__configuration__acymailer__add__error");a.hide();const t={oneDomain:_,ctrl:"dynamics",task:"trigger",plugin:"plgAcymAcymailer",trigger:"ajaxAddDomain"};acym_helper.post(ACYM_AJAX_URL,t).then(_=>{if(_.error)return e.hide(),jQuery("#acym__configuration__acymailer__add__error__message").text(_.message),void a.css("display","flex");jQuery(".acym__listing__row").hide(),_.data.cnameRecords.forEach(function(_){e.append(`\n                    <div class="grid-x cell acym__listing__row">\n                        <div class="grid-x medium-6 cell">\n                            ${_.name}\n                        </div>\n                        <div class="grid-x medium-6 cell">\n                            ${_.value}\n                        </div>\n                    </div>`)})})}(),jQuery("#acym__walkthrough__acymailer__domain_status_reload").off("click").on("click",function(){const e=jQuery("#acym__walkthrough__acymailer__domain").val();if(acym_helper.empty(e))return;const _=jQuery("#acym__walkthrough__acymailer__domain_status");_.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>'),acym_helper.get(ACYM_AJAX_URL,{sendingMethod:"acymailer",ctrl:"dynamics",task:"trigger",plugin:"plgAcymAcymailer",trigger:"ajaxCheckDomain"}).then(a=>{a.error?_.text(a.message):(Object.entries(a.data.domains).forEach(([a,t])=>{if(a!==e)return;let c,r;"SUCCESS"===t.status?(c="acymicon-check-circle acym__color__green",r=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_SUCCESS,jQuery("#acym__walkthrough__acymailer__domain_status_reload").parent().hide(),jQuery("#acym__selection__button-select").removeAttr("disabled")):"FAILED"===t.status?(c="acymicon-remove acym__color__red",r=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_FAIL,jQuery("#acym__walkthrough__acymailer__domain_status_reload").hide()):(c="acymicon-access_time acym__color__orange",r=ACYM_JS_TXT.ACYM_WALK_ACYMAILER_STATUS_WAIT),_.html(`<i class="${c} padding-right-1"></i>${r}`)}),_.find(".acymicon-circle-o-notch").length>0&&_.html(ACYM_JS_TXT.ACYM_ERROR))})}),acym_helperEditorWysid.initEditor(),acym_helperMailer.setTestCredentialsSendingMethods(),acym_helperMailer.setButtonCopyFromPlugin(),acym_helperMailer.setSynchroExistingUsers(),acym_helperSelectionPage.setSelectionElement(!0,!1,void 0,"#acym__selection__button-select"),acym_helperMailer.displayAuth2Params(),acym_helperMailer.acymailerAddDomains(),acym_helperMailer.displayCnameRecord(),acym_helperMailer.deleteDomain(),e.walkthroughList=function(){return 0!==e(".acym__walkthrough__list__receivers__remove").length||(alert(ACYM_JS_TXT.ACYM_AT_LEAST_ONE_USER),!1)}});