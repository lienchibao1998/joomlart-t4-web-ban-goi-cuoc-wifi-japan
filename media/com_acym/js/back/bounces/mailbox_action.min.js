jQuery(function(_){let i=0;function e(){_('[data-action-number="'+i+'"] .acym__mailbox__edition__action__one__choice').on("change",function(){const i=_(this).parent();i.find(".acym__mailbox__edition__action__one__parameters").hide(),i.find("."+_(this).val()).show()})}_("#mailboxconditionssender").on("change",function(){switch(_(".acym__mailbox__edition__conditions_sender__option").hide(),_(this).val()){case"specific":_("#acym__mailbox__edition__conditions_sender__specific").show();break;case"groups":_("#acym__mailbox__edition__conditions_sender__groups").show();break;case"lists":_("#acym__mailbox__edition__conditions_sender__lists").show()}}).trigger("change"),_("#mailboxconditionssubject").on("change",function(){_(".acym__mailbox__edition__conditions_subject__option").hide();const i=_("#acym__mailbox__edition__conditions_subject__remove");switch(_(this).val()){case"begins":case"contains":case"ends":_("#acym__mailbox__edition__conditions_subject__text").show(),i.show();break;case"regex":_("#acym__mailbox__edition__conditions_subject__regex").show(),i.show()}}).trigger("change"),e(),_(".acym__mailbox__edition__action__one__parameters").hide(),_("#acym__mailbox__edition__action__new").off("click").on("click",function(){const o=_("#acym__mailbox__edition__action__number");o.val(parseInt(o.val())+1),i=o.val(),_(this).before(_("#acym__mailbox__edition__action__template").html().replaceAll("__num__",i)),_('[data-action-number="'+i+'"] .acym__mailbox__edition__action__one__parameters').hide(),_(this).prev().find("select").select2({theme:"foundation",width:"100%"}),e(),_(".acym__mailbox__edition__action__delete").off("click").on("click",function(){_(this).closest(".acym__mailbox__edition__action__one").remove()})}),function(){const e=acym_helper.parseJson(_("#acym__mailbox__edition__actions").val());_.each(e,function(e,o){_("#acym_action0action").val().length>0&&_("#acym__mailbox__edition__action__new").trigger("click"),_.each(o,function(e,o){const c=_("#acym_action"+i+"action");c.val(e),c.trigger("change"),_.each(o,function(o,c){const t=_('[name="acym_action['+i+"]["+e+"]["+o+']"]');acym_helperFilter.setFieldValue(t,c),t.trigger("change")})})})}(),function(){const i=_("#acym__mailbox__edition__configuration__test-loader"),e=_("#acym__mailbox__edition__configuration__test-result"),o=_("#acym__mailbox__edition__configuration__test-icon");_("#acym__mailbox__edition__configuration__test-test").off("click").on("click",function(){i.css("display","flex"),e.html(""),e.removeAttr("data-acym-tooltip").removeClass("acym__tooltip"),o.removeClass("acymicon-check-circle acym__color__green acymicon-times-circle acym__color__red"),o.hide();const c=_(this).closest("form").serializeArray(),t=["id","server","username","password","connection_method","secure_method","self_signed","port"].map(_=>`mailbox[${_}]`),n=c.filter(_=>t.includes(_.name));n.push({name:"ctrl",value:"bounces"}),n.push({name:"task",value:"testMailboxAction"}),acym_helper.post(ACYM_AJAX_URL,n).then(({error:_,message:c,data:t})=>{i.hide(),e.html(c),_?(t.report.length&&(e.attr("data-acym-tooltip",t.report.join("<br>")),acym_helperTooltip.setTooltip()),o.addClass("acymicon-times-circle acym__color__red")):o.addClass("acymicon-check-circle acym__color__green"),o.css("display","flex")})})}()});