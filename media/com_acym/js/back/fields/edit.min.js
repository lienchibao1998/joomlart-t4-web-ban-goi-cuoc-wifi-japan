jQuery(function(_){let e={text:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__authorized-content","#acym__fields__error-message-invalid","#acym__fields__default-value","#acym__fields__max_characters","#acym__fields__size"],textarea:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__max_characters","#acym__fields__rows","#acym__fields__columns"],radio:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db"],checkbox:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db"],single_dropdown:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db","#acym__fields__size"],multiple_dropdown:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db","#acym__fields__size"],date:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__format"],file:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__size"],phone:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__max_characters","#acym__fields__size"],custom_text:["#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__custom-text"],language:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__size"]},i={"#acym__fields__error-message":"#acym__fields__edit__section__title--properties","#acym__fields__editable-user-creation":"#acym__fields__edit__section__title--properties","#acym__fields__editable-user-modification":"#acym__fields__edit__section__title--properties","#acym__fields__authorized-content":"#acym__fields__edit__section__title--content","#acym__fields__error-message-invalid":"#acym__fields__edit__section__title--content","#acym__fields__default-value":"#acym__fields__edit__section__title--content","#acym__fields__format":"#acym__fields__edit__section__title--content","#acym__fields__max_characters":"#acym__fields__edit__section__title--content","#acym__fields__rows":"#acym__fields__edit__section__title--style","#acym__fields__columns":"#acym__fields__edit__section__title--style","#acym__fields__size":"#acym__fields__edit__section__title--style","#acym__fields__value":"#acym__fields__edit__section__title--values","#acym__fields__from-db":"#acym__fields__edit__section__title--values"};function a(){let a=e[_("#fieldtype").val()];_(".acym__fields__change").hide(),_(".acym__fields__edit__section__title").hide();for(let e=0;e<a.length;e++)_(a[e]).show(),_(i[a[e]]).show()}function l(){_(".acym__fields__values__listing__sortable").sortable({item:".acym__fields__value__sortable",handle:".acym__sortable__field__edit__handle",animation:150})}function t(){let e="";_(".acym__fields__value__value").on("focus",function(){e=this.value}).off("change").on("change",function(){if(acym_helper.empty(e))return;let _=ACYM_JS_TXT.ACYM_CF_VALUE_CHANGED+"\n\n";_+=ACYM_JS_TXT.ACYM_OLD_VALUE+": "+e+"\n",_+=ACYM_JS_TXT.ACYM_NEW_VALUE+": "+this.value,acym_helper.confirm(_)||(this.value=e)}),_(".acym__field__delete__value").off("click").on("click",function(){acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)&&_(this).parent().remove()})}a(),_("#fieldtype").on("change",function(){a()}),l(),_("#acym__fields__value__add-value").off("click").on("click",function(){let e='<select acym-data-infinite class="acym__fields__edit__select acym__select" name="field[value][disabled][]">';e+='<option value="n">'+ACYM_JS_TXT.ACYM_NO+"</option>",e+='<option value="y">'+ACYM_JS_TXT.ACYM_YES+"</option>";let i='<div class="grid-x cell acym__fields__value__sortable acym__content margin-bottom-1 grid-margin-x margin-y">';i+='<div class="medium-1 cell acym_vcenter align-center acym__field__sortable__listing__handle">',i+='<div class="grabbable acym__sortable__field__edit__handle grid-x">',i+='<i class="acymicon-ellipsis-h cell acym__color__dark-gray"></i>',i+='<i class="acymicon-ellipsis-h cell acym__color__dark-gray"></i>',i+="</div>",i+="</div>",i+='<input type="text" name="field[value][value][]" class="cell medium-4 acym__fields__value__value" value="">',i+='<input type="text" name="field[value][title][]" class="cell medium-4 acym__fields__value__title" value="">',i+='<div class="cell medium-2">'+(e+="</select>")+"</div>",i+='<i class="cell acymicon-close small-1 acym__color__red cursor-pointer acym__field__delete__value"></i>',i+="</div>",_(".acym__fields__values__listing__sortable").append(i),acym_helperSelect2.setSelect2(),l(),t()}),_('select[name="fieldDB[database]"]').off("change").on("change",function(){acym_helper.post(ACYM_AJAX_URL,{ctrl:"fields",task:"ajaxGetTables",database:_(this).val()}).then(_=>{const e=jQuery('select[name="fieldDB[table]"]');e.html("");for(let i=0;i<_.data.tables.length;i++)e.append('<option value="'+_.data.tables[i]+'">'+_.data.tables[i]+"</option>")})}),_('select[name="fieldDB[table]"]').off("change").on("change",function(){acym_helper.post(ACYM_AJAX_URL,{ctrl:"fields",task:"ajaxGetColumns",table:jQuery(this).val(),database:jQuery('select[name="fieldDB[database]"]').val()}).then(_=>{const e=jQuery(".acym__fields__database__columns");e.html("");for(let i=0;i<_.data.columns.length;i++){let a=_.data.columns[i];"ACYM_CHOOSE_COLUMN"===_.data.columns[i]?e.append('<option value="">'+ACYM_JS_TXT.ACYM_CHOOSE_COLUMN+"</option>"):e.append('<option value="'+a+'">'+a+"</option>")}})}),_("#acym__display_if_and-or").off("change").on("change",function(){let e=_(".acym__fields__display-if__list-fields option"),i='<select acym-data-infinite class="acym__fields__edit__select acym__select" name="field[option][display_field][]">';e.each(function(){i+='<option value="'+_(this).html()+'">'+_(this).html()+"</option>"}),i+="</select>",_(".acym__display_if_add").before('<input type="hidden" name="field[option][display_and_or][]" value="'+_(this).find("option:selected").val()+'"><div class="cell grid-x grid-margin-x"><h6 class="cell">'+_(this).find("option:selected").text()+'</h6><div class="cell medium-5">'+i+'</div><div class="cell medium-2"><select name="field[option][display_sign][]" class="acym__fields__edit__select"><option value="=">=</option><option value="!=">!=</option><option value=">">></option><option value="<"><</option><option value="<="><=</option><option value=">=">>=</option></select></div><input class="medium-5 cell" type="text" name="field[option][display_value][]"></div>'),acym_helperSelect2.setSelect2(),_(this).val("none")}),t(),acym_helperSelectionMultilingual.init("field")});