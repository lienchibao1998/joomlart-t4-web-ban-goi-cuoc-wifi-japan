jQuery(function(e){acym_helperSegment.reloadGlobalCounter(e(".acym__segments__select__classic__filter").closest(".acym__segments__group__filter")),acym_helperSegment.refreshFilterProcess(),acym_helperSegment.rebuildFilters(),e('[name="segment_selected"], [name="invert"]').on("change",function(_){const a=e('[name="segment_selected"]');if(""!==a.val()&&e('[name^="acym_action"]').length>0)acym_helper.confirm(ACYM_JS_TXT.ACYM_IF_YOU_SELECT_SEGMENT_FILTERS_ERASE)?e(".acym__segments__one__filter__classic").each((_,a)=>{0===_?(e(a).find(".acym__segments__inserted__filter").remove(),e(a).find('[name="filters_name"]').val(0)):e(a).remove()}):a.val("");else if("invert"===e(this).attr("name"))return void acym_helperSegment.reloadGlobalCounter();let t=jQuery("#acym__campaigns__segment__edit-user-count");t.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>');const i=document.querySelector('input[value="exclude"]').checked?1:0;let s=ACYM_AJAX_URL+"&ctrl=segments&task=countGlobalBySegmentId&segmentId="+a.val()+"&lists="+e('[name="list_selected"]').val()+"&exclude="+i;e.get(s,function(e){(e=acym_helper.parseJson(e)).error?(acym_helperNotification.addNotification(e.message,"error"),t.html("?")):t.html(e.data.count)})}),e(".acym__campaigns__segment__edit__filters__save-icon").off("click").on("click",function(){e(this).hide(),e(".acym__campaigns__segment__edit__filters__save-action").css("display","flex")}),e(".acym__campaigns__segment__edit__filters__save-action .acym__button__cancel").off("click").on("click",function(){e(".acym__campaigns__segment__edit__filters__save-icon").css("display","flex"),e(".acym__campaigns__segment__edit__filters__save-action").hide()}),e(".acym__campaigns__segment__edit__filters__save-action-save").off("click").on("click",function(){let _=e("#acym__campaigns__segment__edit__filters__save-segment-name"),a=e("#acym__campaigns__segment__edit__filters__save-well");if(""===_.val()||0===e('[name^="acym_action"]').length)return alert(ACYM_JS_TXT.ACYM_PLEASE_FILL_A_NAME_FOR_YOUR_SEGMENT),!1;e(".acym__campaigns__segment__edit__filters__save-loading").css("display","flex"),e(".acym__campaigns__segment__edit__filters__save-icon").hide(),e(".acym__campaigns__segment__edit__filters__save-action").hide();let t=ACYM_AJAX_URL+"&ctrl=segments&task=saveFromCampaign";e.post(t,jQuery("#acym_form").serialize()+"&ctrl=segments&task=saveFromCampaign").done(function(_){if((_=acym_helper.parseJson(_)).error)return acym_helperNotification.addNotification(_.message,"error",!0),!1;acym_helperNotification.addNotification(_.message,"info",!0),a.css("display","flex").html(_.message),e('[name="saved_segment_id"]').val(_.data.segment_id)}).error(function(){acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_COULD_NOT_SAVE_SEGMENT,"error",!0)}).always(function(){e(".acym__campaigns__segment__edit__filters__save-loading").hide(),e(".acym__campaigns__segment__edit__filters__save-icon").css("display","flex"),_.val(""),setTimeout(()=>{a.hide().html("")},3e3)})}),acym_helperFilter.setAutomationReload()});